diff --git a/apps/gateway/src/api/proliferate/http/sessions.ts b/apps/gateway/src/api/proliferate/http/sessions.ts
index 2d159d5..3bfb625 100644
--- a/apps/gateway/src/api/proliferate/http/sessions.ts
+++ b/apps/gateway/src/api/proliferate/http/sessions.ts
@@ -399,9 +399,6 @@ async function startSetupSession(
 	organizationId: string,
 	hubManager: HubManager,
 ): Promise<void> {
-	// Billing gate — setup sessions are billable like regular sessions
-	await billing.assertBillingGateForOrg(organizationId, "session_start");
-
 	// Get repo names for prompt
 	const prebuildRepos = await prebuilds.getPrebuildReposWithDetails(prebuildId);
 
@@ -411,31 +408,15 @@ async function startSetupSession(
 	const repoNamesStr = repoNames.join(", ") || "workspace";
 	const prompt = `Set up ${repoNamesStr} for development. Get everything running and working.`;
 
-	// Create setup session (with atomic concurrent admission guard)
+	// Create setup session
 	const sessionId = crypto.randomUUID();
-	const setupInput = {
+
+	await sessions.createSetupSession({
 		id: sessionId,
 		prebuildId,
 		organizationId,
 		initialPrompt: prompt,
-	};
-
-	const planLimits = await billing.getOrgPlanLimits(organizationId);
-	if (planLimits) {
-		const { created } = await sessions.createSetupSessionWithAdmissionGuard(
-			setupInput,
-			planLimits.maxConcurrentSessions,
-		);
-		if (!created) {
-			logger.info(
-				{ organizationId, maxConcurrent: planLimits.maxConcurrentSessions },
-				"Setup session skipped: concurrent limit reached",
-			);
-			return;
-		}
-	} else {
-		await sessions.createSetupSession(setupInput);
-	}
+	});
 
 	// Use HubManager to get/create hub and post prompt directly (fire-and-forget)
 	hubManager
diff --git a/apps/gateway/src/expiry/expiry-queue.ts b/apps/gateway/src/expiry/expiry-queue.ts
index b508120..be99cde 100644
--- a/apps/gateway/src/expiry/expiry-queue.ts
+++ b/apps/gateway/src/expiry/expiry-queue.ts
@@ -94,15 +94,7 @@ export function startSessionExpiryWorker(env: GatewayEnv, hubManager: HubManager
 				const startMs = Date.now();
 				const sessionId = job.data.sessionId;
 				logger.debug({ sessionId, jobId: job.id }, "expiry.job.start");
-
-				// If the hub was already evicted (e.g. idle snapshot completed),
-				// skip — don't create a new hub for a session that's already handled.
-				const hub = hubManager.get(sessionId);
-				if (!hub) {
-					logger.info({ sessionId, jobId: job.id }, "expiry.job.skip (hub already evicted)");
-					return;
-				}
-
+				const hub = await hubManager.getOrCreate(sessionId);
 				await hub.runExpiryMigration();
 				logger.info(
 					{
diff --git a/apps/gateway/src/hub/hub-manager.ts b/apps/gateway/src/hub/hub-manager.ts
index 3d0cf44..711f4b5 100644
--- a/apps/gateway/src/hub/hub-manager.ts
+++ b/apps/gateway/src/hub/hub-manager.ts
@@ -79,15 +79,4 @@ export class HubManager {
 	getActiveSessionIds(): string[] {
 		return Array.from(this.hubs.keys());
 	}
-
-	/**
-	 * Release all owner/runtime leases. Called on graceful shutdown
-	 * so a restarted instance can immediately re-acquire sessions.
-	 */
-	releaseAllLeases(): void {
-		for (const [sessionId, hub] of this.hubs) {
-			hub.stopMigrationMonitor();
-			this.hubs.delete(sessionId);
-		}
-	}
 }
diff --git a/apps/gateway/src/hub/migration-controller.ts b/apps/gateway/src/hub/migration-controller.ts
index b8bc782..a00d796 100644
--- a/apps/gateway/src/hub/migration-controller.ts
+++ b/apps/gateway/src/hub/migration-controller.ts
@@ -138,24 +138,17 @@ export class MigrationController {
 				this.options.runtime.disconnectSse();
 
 				// 2. Snapshot: memory (preferred) → pause → filesystem
-				let snapshotId: string | undefined;
-
+				let snapshotId: string;
 				if (provider.supportsMemorySnapshot && provider.memorySnapshot) {
-					try {
-						this.logger.info("Taking memory snapshot for idle shutdown");
-						const memStartMs = Date.now();
-						const result = await provider.memorySnapshot(this.options.sessionId, freshSandboxId);
-						this.logger.debug(
-							{ provider: provider.type, durationMs: Date.now() - memStartMs },
-							"migration.memory_snapshot",
-						);
-						snapshotId = result.snapshotId;
-					} catch (memErr) {
-						this.logger.warn({ err: memErr }, "Memory snapshot failed, falling back to filesystem");
-					}
-				}
-
-				if (!snapshotId && provider.supportsPause) {
+					this.logger.info("Taking memory snapshot for idle shutdown");
+					const memStartMs = Date.now();
+					const result = await provider.memorySnapshot(this.options.sessionId, freshSandboxId);
+					this.logger.debug(
+						{ provider: provider.type, durationMs: Date.now() - memStartMs },
+						"migration.memory_snapshot",
+					);
+					snapshotId = result.snapshotId;
+				} else if (provider.supportsPause) {
 					this.logger.info("Pausing sandbox for idle shutdown");
 					const pauseStartMs = Date.now();
 					const result = await provider.pause(this.options.sessionId, freshSandboxId);
@@ -164,9 +157,7 @@ export class MigrationController {
 						"migration.pause",
 					);
 					snapshotId = result.snapshotId;
-				}
-
-				if (!snapshotId) {
+				} else {
 					this.logger.info("Taking filesystem snapshot for idle shutdown");
 					const snapStartMs = Date.now();
 					const result = await provider.snapshot(this.options.sessionId, freshSandboxId);
diff --git a/apps/gateway/src/hub/session-runtime.ts b/apps/gateway/src/hub/session-runtime.ts
index 9d612c1..e3a45f5 100644
--- a/apps/gateway/src/hub/session-runtime.ts
+++ b/apps/gateway/src/hub/session-runtime.ts
@@ -6,7 +6,7 @@
  */
 
 import { type Logger, createLogger } from "@proliferate/logger";
-import { baseSnapshots, billing, sessions } from "@proliferate/services";
+import { baseSnapshots, sessions } from "@proliferate/services";
 import type {
 	AutoStartOutputEntry,
 	PrebuildServiceCommand,
@@ -292,20 +292,6 @@ export class SessionRuntime {
 				return;
 			}
 
-			// Billing gate: deny resume/cold-start when org is blocked or exhausted.
-			// Uses "session_resume" which skips credit minimum but enforces state-level checks.
-			// Already-running sessions skip this entirely (ensureRuntimeReady returns early).
-			const orgId = this.context.session.organization_id;
-			if (orgId) {
-				const gateResult = await billing.checkBillingGateForOrg(orgId, "session_resume");
-				if (!gateResult.allowed) {
-					const msg = gateResult.message ?? "Billing check failed";
-					this.log("Billing gate denied resume", { orgId, error: msg });
-					this.onStatus("error", msg);
-					throw new Error(`Billing gate denied: ${msg}`);
-				}
-			}
-
 			const hasSandbox = Boolean(this.context.session.sandbox_id);
 			this.onStatus(hasSandbox ? "resuming" : "creating");
 
diff --git a/apps/gateway/src/index.ts b/apps/gateway/src/index.ts
index f80e95a..3d4bc32 100644
--- a/apps/gateway/src/index.ts
+++ b/apps/gateway/src/index.ts
@@ -32,21 +32,11 @@ async function start(): Promise<void> {
 	setLockRedisClient(redisClient);
 
 	// Create and start server
-	const { server, hubManager } = createServer({ env, logger });
+	const { server } = createServer({ env, logger });
 
 	server.listen(env.port, () => {
 		logger.info({ port: env.port }, "Gateway listening");
 	});
-
-	// Graceful shutdown: release all owner/runtime leases so a
-	// restarted instance can immediately re-acquire sessions.
-	const shutdown = () => {
-		logger.info("Shutting down — releasing leases");
-		hubManager.releaseAllLeases();
-		server.close();
-	};
-	process.once("SIGTERM", shutdown);
-	process.once("SIGINT", shutdown);
 }
 
 start().catch((err) => {
diff --git a/apps/gateway/src/lib/session-creator.ts b/apps/gateway/src/lib/session-creator.ts
index 06c6cd3..b5880c5 100644
--- a/apps/gateway/src/lib/session-creator.ts
+++ b/apps/gateway/src/lib/session-creator.ts
@@ -12,7 +12,6 @@ import { createLogger } from "@proliferate/logger";
 import {
 	automations,
 	baseSnapshots,
-	billing,
 	integrations,
 	prebuilds,
 	sessions,
@@ -209,10 +208,10 @@ export async function createSession(
 		}
 	}
 
-	// Create session record via services (with atomic concurrent admission guard)
+	// Create session record via services
 	try {
 		const dbStartMs = Date.now();
-		const sessionInput = {
+		await sessions.create({
 			id: sessionId,
 			prebuildId,
 			organizationId,
@@ -231,22 +230,7 @@ export async function createSession(
 			automationId,
 			triggerId,
 			triggerEventId,
-		};
-
-		const planLimits = await billing.getOrgPlanLimits(organizationId);
-		if (planLimits) {
-			const { created } = await sessions.createWithAdmissionGuard(
-				sessionInput,
-				planLimits.maxConcurrentSessions,
-			);
-			if (!created) {
-				throw new Error(
-					`Concurrent session limit reached. Your plan allows ${planLimits.maxConcurrentSessions} concurrent session${planLimits.maxConcurrentSessions === 1 ? "" : "s"}.`,
-				);
-			}
-		} else {
-			await sessions.create(sessionInput);
-		}
+		});
 		log.debug({ durationMs: Date.now() - dbStartMs }, "session_creator.create_session.db.create");
 	} catch (err) {
 		log.error({ err, durationMs: Date.now() - startMs }, "Failed to create session");
diff --git a/apps/web/src/app/auth/callback/page.tsx b/apps/web/src/app/(auth)/auth/callback/page.tsx
similarity index 100%
rename from apps/web/src/app/auth/callback/page.tsx
rename to apps/web/src/app/(auth)/auth/callback/page.tsx
diff --git a/apps/web/src/app/auth/email-verified/page.tsx b/apps/web/src/app/(auth)/auth/email-verified/page.tsx
similarity index 100%
rename from apps/web/src/app/auth/email-verified/page.tsx
rename to apps/web/src/app/(auth)/auth/email-verified/page.tsx
diff --git a/apps/web/src/app/auth/verify-email/page.tsx b/apps/web/src/app/(auth)/auth/verify-email/page.tsx
similarity index 100%
rename from apps/web/src/app/auth/verify-email/page.tsx
rename to apps/web/src/app/(auth)/auth/verify-email/page.tsx
diff --git a/apps/web/src/app/invite/[id]/page.tsx b/apps/web/src/app/(auth)/invite/[id]/page.tsx
similarity index 100%
rename from apps/web/src/app/invite/[id]/page.tsx
rename to apps/web/src/app/(auth)/invite/[id]/page.tsx
diff --git a/apps/web/src/app/sign-in/page.tsx b/apps/web/src/app/(auth)/sign-in/page.tsx
similarity index 100%
rename from apps/web/src/app/sign-in/page.tsx
rename to apps/web/src/app/(auth)/sign-in/page.tsx
diff --git a/apps/web/src/app/sign-up/page.tsx b/apps/web/src/app/(auth)/sign-up/page.tsx
similarity index 100%
rename from apps/web/src/app/sign-up/page.tsx
rename to apps/web/src/app/(auth)/sign-up/page.tsx
diff --git a/apps/web/src/app/dashboard/actions/page.tsx b/apps/web/src/app/(command-center)/dashboard/actions/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/actions/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/actions/page.tsx
diff --git a/apps/web/src/app/dashboard/automations/[id]/events/page.tsx b/apps/web/src/app/(command-center)/dashboard/automations/[id]/events/page.tsx
similarity index 97%
rename from apps/web/src/app/dashboard/automations/[id]/events/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/automations/[id]/events/page.tsx
index 24a92a1..c097ff7 100644
--- a/apps/web/src/app/dashboard/automations/[id]/events/page.tsx
+++ b/apps/web/src/app/(command-center)/dashboard/automations/[id]/events/page.tsx
@@ -253,12 +253,19 @@ function RunDetailSection({ run }: { run: AutomationRun }) {
 					>
 						Agent Session
 					</Text>
-					<Link href={`/dashboard/sessions/${run.session_id}`}>
-						<Button variant="outline" size="sm" className="gap-1.5">
-							<Bot className="w-3.5 h-3.5" />
-							View agent session
-						</Button>
-					</Link>
+					<div className="flex items-center gap-2">
+						<Link href={`/dashboard/automations/runs/${run.id}`}>
+							<Button variant="default" size="sm" className="gap-1.5">
+								Inspect Run
+							</Button>
+						</Link>
+						<Link href={`/workspace/${run.session_id}`}>
+							<Button variant="outline" size="sm" className="gap-1.5">
+								<Bot className="w-3.5 h-3.5" />
+								Take Over in Studio
+							</Button>
+						</Link>
+					</div>
 				</div>
 			)}
 
diff --git a/apps/web/src/app/dashboard/automations/[id]/page.tsx b/apps/web/src/app/(command-center)/dashboard/automations/[id]/page.tsx
similarity index 90%
rename from apps/web/src/app/dashboard/automations/[id]/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/automations/[id]/page.tsx
index e1c3bf1..0c10fe0 100644
--- a/apps/web/src/app/dashboard/automations/[id]/page.tsx
+++ b/apps/web/src/app/(command-center)/dashboard/automations/[id]/page.tsx
@@ -264,7 +264,9 @@ function StepLabel({ step, label }: { step: number; label: string }) {
 			<span className="inline-flex items-center justify-center h-5 w-5 rounded-full bg-muted text-[11px] font-semibold text-muted-foreground shrink-0">
 				{step}
 			</span>
-			<Label className="text-sm text-muted-foreground">{label}</Label>
+			<Label className="text-xs font-semibold uppercase tracking-wider text-muted-foreground">
+				{label}
+			</Label>
 		</div>
 	);
 }
@@ -567,27 +569,30 @@ export default function AutomationDetailPage({
 					</div>
 				</div>
 
-				{/* Two Column Layout */}
-				<div className="w-full flex flex-col lg:flex-row grow gap-6 lg:gap-8 pb-8 min-h-min">
-					{/* Left Column - Main Content */}
-					<div className="relative flex-1 min-w-0">
-						<div className="flex flex-col min-h-0 gap-6 lg:gap-8">
-							{/* Instructions */}
-							<TextAreaWithFooter
-								label="Do this..."
-								description="Tell the agent what to do when this automation is triggered."
-								value={instructionsValue}
-								onChange={handleInstructionsChange}
-								placeholder="You are a helpful assistant that investigates and fixes issues..."
-								footerText={
-									hasPendingChanges || updateMutation.isPending
-										? "Saving..."
-										: "Auto-saves as you type"
-								}
-								minHeight="200px"
+				{/* Vertical Wizard Layout — WHEN / WHERE / WHAT / HOW */}
+				<div className="w-full max-w-2xl flex flex-col gap-8 pb-8">
+					{/* Step 1: WHEN — triggers + event filter */}
+					<div>
+						<StepLabel step={1} label="When" />
+						<div className="flex flex-col">
+							{triggers.map((trigger, index) => (
+								<TriggerChip
+									key={trigger.id}
+									trigger={trigger}
+									automationId={automation.id}
+									variant="stacked"
+									isFirst={index === 0}
+									isLast={false}
+								/>
+							))}
+							<AddTriggerButton
+								automationId={automation.id}
+								variant="stacked"
+								isFirst={triggers.length === 0}
+								isLast
 							/>
-
-							{/* LLM Filter */}
+						</div>
+						<div className="mt-4">
 							<TextAreaWithFooter
 								label="Event Filter"
 								description="Use AI to filter events before processing. Events that don't pass will be marked as filtered."
@@ -596,9 +601,53 @@ export default function AutomationDetailPage({
 								placeholder="Only process events where the user was on a checkout or payment page. Ignore events from internal/admin users."
 								minHeight="120px"
 							/>
+						</div>
+					</div>
 
-							{/* LLM Analysis (shown when tools are enabled) */}
-							{hasEnabledTools && (
+					{/* Step 2: WHERE — codebase selection */}
+					<div>
+						<StepLabel step={2} label="Where" />
+						<div className="flex flex-col">
+							<StackedListItem isFirst isLast>
+								<div className="flex items-center justify-between w-full">
+									<span className="text-sm">
+										{automation.default_prebuild_id ? "Configured codebase" : "Any codebase"}
+									</span>
+									<Switch
+										checked={automation.allow_agentic_repo_selection ?? true}
+										onCheckedChange={(checked) =>
+											handleUpdate({ allowAgenticRepoSelection: checked })
+										}
+									/>
+								</div>
+							</StackedListItem>
+						</div>
+						<p className="text-xs text-muted-foreground mt-2">
+							{(automation.allow_agentic_repo_selection ?? true)
+								? "Agent will choose the most relevant codebase for each event."
+								: "Agent will always use the configured codebase."}
+						</p>
+					</div>
+
+					{/* Step 3: WHAT — agent instructions */}
+					<div>
+						<StepLabel step={3} label="What" />
+						<TextAreaWithFooter
+							label="Agent Instructions"
+							description="Tell the agent what to do when this automation is triggered."
+							value={instructionsValue}
+							onChange={handleInstructionsChange}
+							placeholder="You are a helpful assistant that investigates and fixes issues..."
+							footerText={
+								hasPendingChanges || updateMutation.isPending
+									? "Saving..."
+									: "Auto-saves as you type"
+							}
+							minHeight="200px"
+						/>
+						{/* LLM Analysis (shown when tools are enabled) */}
+						{hasEnabledTools && (
+							<div className="mt-4">
 								<TextAreaWithFooter
 									label="Analysis Instructions"
 									description="Customize how AI analyzes events to determine which tools to execute."
@@ -607,38 +656,17 @@ export default function AutomationDetailPage({
 									placeholder="Focus on user-impacting issues. Create Linear issues for bugs that affect checkout. Send Slack notifications for high-severity errors."
 									minHeight="120px"
 								/>
-							)}
-						</div>
+							</div>
+						)}
 					</div>
 
-					{/* Right Column - Configuration */}
-					<div className="lg:w-80 min-w-0 flex flex-col gap-5 shrink-0">
-						{/* Triggers */}
-						<div>
-							<StepLabel step={1} label="When" />
-							<div className="flex flex-col">
-								{triggers.map((trigger, index) => (
-									<TriggerChip
-										key={trigger.id}
-										trigger={trigger}
-										automationId={automation.id}
-										variant="stacked"
-										isFirst={index === 0}
-										isLast={false}
-									/>
-								))}
-								<AddTriggerButton
-									automationId={automation.id}
-									variant="stacked"
-									isFirst={triggers.length === 0}
-									isLast
-								/>
-							</div>
-						</div>
+					{/* Step 4: HOW — model + actions/tools + permissions */}
+					<div>
+						<StepLabel step={4} label="How" />
 
-						{/* Agent */}
-						<div>
-							<StepLabel step={2} label="Model" />
+						{/* Model */}
+						<div className="mb-4">
+							<p className="text-xs text-muted-foreground mb-2">Model</p>
 							<div className="flex flex-col">
 								<StackedListItem isFirst isLast>
 									<ModelSelector
@@ -657,8 +685,8 @@ export default function AutomationDetailPage({
 						</div>
 
 						{/* Actions/Tools */}
-						<div>
-							<StepLabel step={3} label="Actions" />
+						<div className="mb-4">
+							<p className="text-xs text-muted-foreground mb-2">Actions</p>
 							<div className="flex flex-col">
 								<ToolListItem
 									icon={SlackIcon}
@@ -771,8 +799,6 @@ export default function AutomationDetailPage({
 				{/* Bottom spacer */}
 				<div className="h-12 shrink-0" />
 			</div>
-
-			{/* Delete Confirmation Dialog */}
 			<AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>
 				<AlertDialogContent>
 					<AlertDialogHeader>
@@ -814,7 +840,7 @@ function AutomationPermissions({ automationId }: { automationId: string }) {
 
 	return (
 		<div>
-			<StepLabel step={4} label="Permissions" />
+			<p className="text-xs text-muted-foreground mb-2">Permission Overrides</p>
 			{allActions.length === 0 ? (
 				<div className="rounded-lg border border-dashed border-border/80 py-6 text-center">
 					<Shield className="h-5 w-5 mx-auto mb-1.5 text-muted-foreground/40" />
diff --git a/apps/web/src/app/dashboard/automations/page.tsx b/apps/web/src/app/(command-center)/dashboard/automations/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/automations/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/automations/page.tsx
diff --git a/apps/web/src/app/(command-center)/dashboard/automations/runs/[runId]/page.tsx b/apps/web/src/app/(command-center)/dashboard/automations/runs/[runId]/page.tsx
new file mode 100644
index 0000000..ade6fd0
--- /dev/null
+++ b/apps/web/src/app/(command-center)/dashboard/automations/runs/[runId]/page.tsx
@@ -0,0 +1,307 @@
+"use client";
+
+import {
+	type Provider,
+	ProviderIcon,
+	getProviderDisplayName,
+} from "@/components/integrations/provider-icon";
+import { LoadingDots } from "@/components/ui/loading-dots";
+import { orpc } from "@/lib/orpc";
+import { cn } from "@/lib/utils";
+import type { ParsedEventContext } from "@proliferate/shared";
+import { useQuery } from "@tanstack/react-query";
+import {
+	ArrowLeft,
+	Check,
+	Clock,
+	ExternalLink,
+	FileText,
+	Hand,
+	Loader2,
+	Play,
+	Terminal,
+	XCircle,
+} from "lucide-react";
+import Link from "next/link";
+import { useParams, useRouter } from "next/navigation";
+
+// ============================================
+// Helpers
+// ============================================
+
+function getInvocationStatusIcon(status: string) {
+	switch (status) {
+		case "completed":
+			return { icon: Check, className: "text-foreground" };
+		case "pending":
+			return { icon: Hand, className: "text-foreground" };
+		case "approved":
+		case "executing":
+			return { icon: Loader2, className: "text-muted-foreground animate-spin" };
+		case "denied":
+		case "failed":
+		case "expired":
+			return { icon: XCircle, className: "text-muted-foreground" };
+		default:
+			return { icon: Clock, className: "text-muted-foreground/60" };
+	}
+}
+
+function getActionIcon(action: string) {
+	if (action.includes("file") || action.includes("read") || action.includes("write")) {
+		return FileText;
+	}
+	if (action.includes("terminal") || action.includes("exec") || action.includes("command")) {
+		return Terminal;
+	}
+	return Play;
+}
+
+// ============================================
+// Run Inspector Page — terminal-style audit log
+// ============================================
+
+export default function RunInspectorPage() {
+	const params = useParams<{ runId: string }>();
+	const router = useRouter();
+	const runId = params.runId;
+
+	const { data, isLoading, error } = useQuery({
+		...orpc.automations.getRun.queryOptions({ input: { runId } }),
+	});
+
+	if (isLoading) {
+		return (
+			<div className="flex items-center justify-center h-full">
+				<LoadingDots size="md" className="text-muted-foreground" />
+			</div>
+		);
+	}
+
+	if (error || !data) {
+		return (
+			<div className="mx-auto max-w-3xl px-6 py-8">
+				<p className="text-[13px] text-muted-foreground">Run not found.</p>
+				<button
+					type="button"
+					className="mt-2 flex items-center gap-1 text-[13px] text-muted-foreground hover:text-foreground transition-colors"
+					onClick={() => router.push("/dashboard/inbox")}
+				>
+					<ArrowLeft className="h-3 w-3" />
+					Back to inbox
+				</button>
+			</div>
+		);
+	}
+
+	const { run, invocations } = data;
+	const provider = (run.trigger?.provider || "webhook") as Provider;
+	const parsedContext = run.trigger_event?.parsed_context as ParsedEventContext | null;
+	const analysis = (parsedContext as Record<string, unknown> | null)?.llm_analysis_result as {
+		severity: string;
+		summary: string;
+	} | null;
+
+	return (
+		<div className="h-full overflow-y-auto">
+			<div className="mx-auto max-w-3xl px-6 py-8 space-y-6">
+				{/* Header */}
+				<div>
+					<button
+						type="button"
+						onClick={() => router.push("/dashboard/inbox")}
+						className="flex items-center gap-1 text-[11px] text-muted-foreground/50 hover:text-foreground transition-colors mb-3"
+					>
+						<ArrowLeft className="h-3 w-3" />
+						Inbox
+					</button>
+					<div className="flex items-center justify-between">
+						<div className="flex items-center gap-3">
+							<ProviderIcon provider={provider} size="md" />
+							<div>
+								<h1 className="text-base font-semibold tracking-tight">
+									{run.automation_name ?? "Run Inspector"}
+								</h1>
+								<p className="text-[11px] text-muted-foreground/60 font-mono">
+									{getProviderDisplayName(provider)}
+									{run.trigger_event?.provider_event_type &&
+										` · ${run.trigger_event.provider_event_type}`}
+								</p>
+							</div>
+						</div>
+						<RunStatusBadge status={run.status} />
+					</div>
+				</div>
+
+				{/* Analysis summary */}
+				{analysis && (
+					<div className="rounded-lg border border-border/50 bg-muted/30 px-4 py-3">
+						<p className="text-[10px] text-muted-foreground/50 mb-1 uppercase tracking-wider font-medium font-mono">
+							Analysis
+						</p>
+						<p className="text-[13px]">{analysis.summary}</p>
+					</div>
+				)}
+
+				{/* Error/status reason */}
+				{run.error_message && (
+					<div className="rounded-lg border border-border/50 bg-muted/20 px-4 py-3">
+						<p className="text-[10px] text-muted-foreground mb-1 uppercase tracking-wider font-medium font-mono">
+							Error
+						</p>
+						<p className="text-[13px] font-mono text-muted-foreground">{run.error_message}</p>
+					</div>
+				)}
+
+				{/* Timeline — terminal-style audit log */}
+				<div>
+					<p className="text-[10px] text-muted-foreground/50 mb-2 uppercase tracking-wider font-medium font-mono">
+						Action Timeline
+					</p>
+
+					{invocations.length === 0 ? (
+						<div className="rounded-lg border border-dashed border-border/50 py-8 text-center">
+							<Clock className="h-4 w-4 mx-auto mb-1.5 text-muted-foreground/30" />
+							<p className="text-[13px] text-muted-foreground/50">No actions recorded yet.</p>
+						</div>
+					) : (
+						<div className="rounded-lg border border-border/50 bg-background overflow-hidden font-mono">
+							{invocations.map((inv, idx) => {
+								const statusInfo = getInvocationStatusIcon(inv.status);
+								const StatusIcon = statusInfo.icon;
+								const ActionIcon = getActionIcon(inv.action);
+								const time = inv.createdAt ? new Date(inv.createdAt) : null;
+								const timeStr = time
+									? time.toLocaleTimeString([], {
+											hour: "2-digit",
+											minute: "2-digit",
+										})
+									: "--:--";
+								const isPending = inv.status === "pending";
+
+								return (
+									<div
+										key={inv.id}
+										className={cn(
+											"flex items-start gap-3 px-4 py-2.5",
+											idx < invocations.length - 1 && "border-b border-border/30",
+											isPending && "bg-muted/30",
+										)}
+									>
+										{/* Timestamp */}
+										<span className="text-[11px] text-muted-foreground/50 w-10 pt-0.5 shrink-0 tabular-nums">
+											{timeStr}
+										</span>
+
+										{/* Status icon */}
+										<StatusIcon
+											className={cn("h-3.5 w-3.5 mt-0.5 shrink-0", statusInfo.className)}
+										/>
+
+										{/* Content */}
+										<div className="flex-1 min-w-0">
+											<div className="flex items-center gap-2">
+												<ActionIcon className="h-3 w-3 text-muted-foreground/40" />
+												<span className="text-[12px] font-medium">
+													{inv.integration}.{inv.action}
+												</span>
+												<span
+													className={cn(
+														"text-[10px] px-1 py-0.5 rounded border",
+														inv.riskLevel === "write"
+															? "border-border text-muted-foreground"
+															: inv.riskLevel === "danger"
+																? "border-border text-foreground"
+																: "border-border/50 text-muted-foreground/60",
+													)}
+												>
+													{inv.riskLevel}
+												</span>
+											</div>
+
+											{isPending && (
+												<p className="text-[11px] text-foreground mt-0.5 font-medium">
+													PENDING — Awaiting Approval
+												</p>
+											)}
+											{inv.status === "denied" && inv.deniedReason && (
+												<p className="text-[11px] text-muted-foreground mt-0.5">
+													Denied: {inv.deniedReason}
+												</p>
+											)}
+											{inv.error && (
+												<p className="text-[11px] text-muted-foreground mt-0.5 truncate">
+													{inv.error}
+												</p>
+											)}
+											{inv.durationMs != null && inv.status === "completed" && (
+												<p className="text-[10px] text-muted-foreground/40 mt-0.5">
+													{inv.durationMs}ms
+												</p>
+											)}
+										</div>
+									</div>
+								);
+							})}
+						</div>
+					)}
+				</div>
+
+				{/* Actions footer */}
+				<div className="flex items-center gap-2">
+					{run.session_id && (
+						<Link href={`/workspace/${run.session_id}`}>
+							<button
+								type="button"
+								className="flex items-center gap-1.5 h-7 px-3 rounded-md bg-foreground text-background hover:bg-foreground/90 transition-colors text-[12px] font-medium"
+							>
+								<ExternalLink className="h-3 w-3" />
+								Take Over in Studio
+							</button>
+						</Link>
+					)}
+					{run.automation_id && (
+						<Link href={`/dashboard/automations/${run.automation_id}`}>
+							<button
+								type="button"
+								className="flex items-center h-7 px-3 rounded-md border border-border/50 text-[12px] text-muted-foreground hover:text-foreground hover:border-border transition-colors"
+							>
+								View Automation
+							</button>
+						</Link>
+					)}
+				</div>
+
+				{/* Bottom spacer */}
+				<div className="h-6" />
+			</div>
+		</div>
+	);
+}
+
+// ============================================
+// Status Badge — monochrome with subtle tint
+// ============================================
+
+function RunStatusBadge({ status }: { status: string }) {
+	const styles: Record<string, string> = {
+		succeeded: "bg-foreground text-background",
+		running: "bg-muted text-foreground border-border",
+		enriching: "bg-muted text-foreground border-border",
+		queued: "bg-muted text-muted-foreground border-border/50",
+		failed: "bg-muted text-foreground border-border",
+		needs_human: "bg-foreground text-background",
+		timed_out: "bg-muted text-muted-foreground border-border/50",
+	};
+
+	return (
+		<span
+			className={cn(
+				"inline-flex items-center text-[11px] font-mono font-medium px-2 py-0.5 rounded-md border",
+				styles[status] ?? styles.queued,
+			)}
+		>
+			{status.replace(/_/g, " ")}
+		</span>
+	);
+}
diff --git a/apps/web/src/app/dashboard/inbox/page.tsx b/apps/web/src/app/(command-center)/dashboard/inbox/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/inbox/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/inbox/page.tsx
diff --git a/apps/web/src/app/dashboard/integrations/[id]/page.tsx b/apps/web/src/app/(command-center)/dashboard/integrations/[id]/page.tsx
similarity index 76%
rename from apps/web/src/app/dashboard/integrations/[id]/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/integrations/[id]/page.tsx
index 0a20fc0..8340059 100644
--- a/apps/web/src/app/dashboard/integrations/[id]/page.tsx
+++ b/apps/web/src/app/(command-center)/dashboard/integrations/[id]/page.tsx
@@ -23,7 +23,8 @@ import { orpc } from "@/lib/orpc";
 import { cn } from "@/lib/utils";
 import type { ConnectorConfig } from "@proliferate/shared";
 import { useQueryClient } from "@tanstack/react-query";
-import { ArrowLeft, Shield } from "lucide-react";
+import { useQuery } from "@tanstack/react-query";
+import { AlertTriangle, ArrowLeft, Shield } from "lucide-react";
 import { useParams, useRouter } from "next/navigation";
 import { useState } from "react";
 
@@ -126,7 +127,7 @@ export default function IntegrationDetailPage() {
 						)}
 					>
 						<Shield className="h-3.5 w-3.5 inline mr-1.5" />
-						Agent Permissions
+						Security Policies
 					</button>
 				</div>
 
@@ -299,8 +300,22 @@ function PermissionsTab({
 	const setActionMode = useSetActionMode();
 	const modes = modesData?.modes ?? {};
 
-	// Get the list of actions
-	let actions: { key: string; name: string; description: string; riskLevel: string }[] = [];
+	// For MCP connectors, fetch dynamic tools from listActions
+	const { data: connectorTools, isLoading: toolsLoading } = useQuery({
+		...orpc.integrations.listActions.queryOptions({
+			input: { connectorId: connectorId ?? "" },
+		}),
+		enabled: !!connectorId,
+	});
+
+	// Build action list — static for OAuth, dynamic for MCP connectors
+	let actions: {
+		key: string;
+		name: string;
+		description: string;
+		riskLevel: string;
+		drifted?: boolean;
+	}[] = [];
 
 	if (isOAuth && provider) {
 		const adapter = ACTION_ADAPTERS.find((a) => a.integration === provider);
@@ -312,26 +327,31 @@ function PermissionsTab({
 				riskLevel: action.riskLevel,
 			}));
 		}
+	} else if (connectorId && connectorTools?.tools) {
+		actions = connectorTools.tools.map((tool) => ({
+			key: `connector:${connectorId}:${tool.name}`,
+			name: tool.name,
+			description: tool.description,
+			riskLevel: tool.riskLevel,
+		}));
 	}
-	// For MCP connectors, we'd need dynamic tool list — show a placeholder for now
-	// (Critical Fix #5: Dynamic actions require a backend route not yet built)
 
-	if (actions.length === 0 && !connectorId) {
+	if (toolsLoading && connectorId) {
 		return (
-			<div className="rounded-lg border border-dashed border-border/80 py-8 text-center">
-				<Shield className="h-6 w-6 mx-auto mb-2 text-muted-foreground/40" />
-				<p className="text-sm text-muted-foreground">No actions available for this integration.</p>
+			<div className="flex items-center justify-center py-12">
+				<LoadingDots size="md" className="text-muted-foreground" />
 			</div>
 		);
 	}
 
-	if (actions.length === 0 && connectorId) {
+	if (actions.length === 0) {
 		return (
 			<div className="rounded-lg border border-dashed border-border/80 py-8 text-center">
 				<Shield className="h-6 w-6 mx-auto mb-2 text-muted-foreground/40" />
 				<p className="text-sm text-muted-foreground">
-					Tool permissions for custom connectors will be available when agents discover tools at
-					runtime.
+					{connectorId
+						? "No tools discovered. The connector may be unreachable or has no tools."
+						: "No actions available for this integration."}
 				</p>
 			</div>
 		);
@@ -342,33 +362,58 @@ function PermissionsTab({
 			<p className="text-sm text-muted-foreground">
 				Control what your agents can do with this integration. Changes apply to all sessions.
 			</p>
-			<div className="rounded-lg border border-border/80 bg-background divide-y divide-border/60">
-				{actions.map((action) => {
-					const currentMode = modes[action.key] ?? "require_approval";
-					return (
-						<div key={action.key} className="flex items-center justify-between px-4 py-3">
-							<div className="min-w-0 flex-1 mr-4">
-								<p className="text-sm font-medium">{action.name}</p>
-								<p className="text-xs text-muted-foreground">{action.description}</p>
-								<span
-									className={cn(
-										"inline-block mt-1 text-[10px] font-medium px-1.5 py-0.5 rounded-full border",
-										action.riskLevel === "write"
-											? "border-amber-500/30 text-amber-600 bg-amber-50 dark:bg-amber-950/30"
-											: "border-border text-muted-foreground",
-									)}
-								>
-									{action.riskLevel}
-								</span>
+
+			{/* Table header */}
+			<div className="rounded-lg border border-border/80 bg-background">
+				<div className="grid grid-cols-[1fr_auto] items-center px-4 py-2 border-b border-border/60 text-xs text-muted-foreground font-medium">
+					<span>Action</span>
+					<span>Access Policy</span>
+				</div>
+				<div className="divide-y divide-border/60">
+					{actions.map((action) => {
+						const currentMode = modes[action.key] ?? "require_approval";
+						const isDrifted = action.drifted;
+						return (
+							<div
+								key={action.key}
+								className={cn(
+									"flex items-center justify-between px-4 py-3",
+									isDrifted && "bg-amber-50/50 dark:bg-amber-950/20",
+								)}
+							>
+								<div className="min-w-0 flex-1 mr-4">
+									<div className="flex items-center gap-2">
+										<p className="text-sm font-medium font-mono">{action.name}</p>
+										{isDrifted && (
+											<span className="inline-flex items-center gap-1 text-[10px] font-medium text-amber-600 dark:text-amber-400">
+												<AlertTriangle className="h-3 w-3" />
+												Schema changed
+											</span>
+										)}
+									</div>
+									<p className="text-xs text-muted-foreground">{action.description}</p>
+									<span
+										className={cn(
+											"inline-block mt-1 text-[10px] font-medium px-1.5 py-0.5 rounded-full border",
+											action.riskLevel === "write"
+												? "border-amber-500/30 text-amber-600 bg-amber-50 dark:bg-amber-950/30"
+												: action.riskLevel === "danger"
+													? "border-red-500/30 text-red-600 bg-red-50 dark:bg-red-950/30"
+													: "border-border text-muted-foreground",
+										)}
+									>
+										{action.riskLevel}
+									</span>
+								</div>
+								<PermissionControl
+									value={currentMode}
+									onChange={(mode) => setActionMode.mutate({ key: action.key, mode })}
+									disabled={setActionMode.isPending}
+								/>
 							</div>
-							<PermissionControl
-								value={currentMode}
-								onChange={(mode) => setActionMode.mutate({ key: action.key, mode })}
-								disabled={setActionMode.isPending}
-							/>
-						</div>
-					);
-				})}
+						);
+					})}
+				</div>
 			</div>
 		</div>
 	);
diff --git a/apps/web/src/app/dashboard/integrations/page.tsx b/apps/web/src/app/(command-center)/dashboard/integrations/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/integrations/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/integrations/page.tsx
diff --git a/apps/web/src/app/(command-center)/dashboard/page.tsx b/apps/web/src/app/(command-center)/dashboard/page.tsx
new file mode 100644
index 0000000..86b2760
--- /dev/null
+++ b/apps/web/src/app/(command-center)/dashboard/page.tsx
@@ -0,0 +1,20 @@
+"use client";
+
+export const dynamic = "force-dynamic";
+
+import { useRouter } from "next/navigation";
+import { useEffect } from "react";
+
+/**
+ * /dashboard always redirects to /dashboard/inbox.
+ * The Command Center is management-only — session creation lives in the Studio.
+ */
+export default function DashboardPage() {
+	const router = useRouter();
+
+	useEffect(() => {
+		router.replace("/dashboard/inbox");
+	}, [router]);
+
+	return null;
+}
diff --git a/apps/web/src/app/dashboard/repositories/[id]/page.tsx b/apps/web/src/app/(command-center)/dashboard/repositories/[id]/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/repositories/[id]/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/repositories/[id]/page.tsx
diff --git a/apps/web/src/app/dashboard/repositories/page.tsx b/apps/web/src/app/(command-center)/dashboard/repositories/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/repositories/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/repositories/page.tsx
diff --git a/apps/web/src/app/(command-center)/dashboard/sessions/[id]/page.tsx b/apps/web/src/app/(command-center)/dashboard/sessions/[id]/page.tsx
new file mode 100644
index 0000000..0eb441f
--- /dev/null
+++ b/apps/web/src/app/(command-center)/dashboard/sessions/[id]/page.tsx
@@ -0,0 +1,26 @@
+"use client";
+
+import { useRouter, useSearchParams } from "next/navigation";
+import { use, useEffect } from "react";
+
+/**
+ * Legacy redirect: /dashboard/sessions/:id → /workspace/:id
+ * Preserves orgId query param for cross-org session links.
+ */
+export default function LegacyDashboardSessionRedirect({
+	params,
+}: {
+	params: Promise<{ id: string }>;
+}) {
+	const { id } = use(params);
+	const router = useRouter();
+	const searchParams = useSearchParams();
+	const orgId = searchParams.get("orgId");
+
+	useEffect(() => {
+		const target = orgId ? `/workspace/${id}?orgId=${orgId}` : `/workspace/${id}`;
+		router.replace(target);
+	}, [id, orgId, router]);
+
+	return null;
+}
diff --git a/apps/web/src/app/dashboard/sessions/new/page.tsx b/apps/web/src/app/(command-center)/dashboard/sessions/new/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/sessions/new/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/sessions/new/page.tsx
diff --git a/apps/web/src/app/dashboard/sessions/page.tsx b/apps/web/src/app/(command-center)/dashboard/sessions/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/sessions/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/sessions/page.tsx
diff --git a/apps/web/src/app/dashboard/setup/[id]/page.tsx b/apps/web/src/app/(command-center)/dashboard/setup/[id]/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/setup/[id]/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/setup/[id]/page.tsx
diff --git a/apps/web/src/app/dashboard/triggers/page.tsx b/apps/web/src/app/(command-center)/dashboard/triggers/page.tsx
similarity index 100%
rename from apps/web/src/app/dashboard/triggers/page.tsx
rename to apps/web/src/app/(command-center)/dashboard/triggers/page.tsx
diff --git a/apps/web/src/app/dashboard/layout.tsx b/apps/web/src/app/(command-center)/layout.tsx
similarity index 92%
rename from apps/web/src/app/dashboard/layout.tsx
rename to apps/web/src/app/(command-center)/layout.tsx
index f1df07f..690d16e 100644
--- a/apps/web/src/app/dashboard/layout.tsx
+++ b/apps/web/src/app/(command-center)/layout.tsx
@@ -1,9 +1,13 @@
 "use client";
 
 import { ImpersonationBanner } from "@/components/admin/impersonation-banner";
+import {
+	CCMobileSidebar,
+	CCMobileSidebarTrigger,
+	CCSidebar,
+} from "@/components/command-center/sidebar";
 import { BillingBanner } from "@/components/dashboard/billing-banner";
 import { CommandSearch } from "@/components/dashboard/command-search";
-import { MobileSidebar, MobileSidebarTrigger, Sidebar } from "@/components/dashboard/sidebar";
 import { Button } from "@/components/ui/button";
 import { useBilling } from "@/hooks/use-billing";
 import { useSession } from "@/lib/auth-client";
@@ -84,15 +88,15 @@ export default function DashboardLayout({
 			<BillingBanner />
 
 			{/* Mobile header - only visible on mobile */}
-			<div className="flex md:hidden items-center justify-between h-14 px-4 border-b border-border shrink-0">
-				<MobileSidebarTrigger />
+			<div className="flex md:hidden items-center justify-between h-10 px-3 border-b border-border/50 shrink-0">
+				<CCMobileSidebarTrigger />
 				<Button
 					variant="ghost"
 					size="icon"
-					className="h-9 w-9"
+					className="h-7 w-7"
 					onClick={() => setCommandSearchOpen(true)}
 				>
-					<Search className="h-5 w-5" />
+					<Search className="h-4 w-4" />
 					<span className="sr-only">Search</span>
 				</Button>
 			</div>
@@ -100,14 +104,14 @@ export default function DashboardLayout({
 			{/* Main layout: Sidebar + Content */}
 			<div className="flex-1 flex overflow-hidden">
 				{/* Sidebar - desktop only, full height */}
-				<Sidebar />
+				<CCSidebar />
 
 				{/* Main content */}
 				<main className="flex-1 overflow-y-auto animate-in fade-in duration-200">{children}</main>
 			</div>
 
 			{/* Mobile Sidebar Drawer */}
-			<MobileSidebar />
+			<CCMobileSidebar />
 
 			{/* Command Search */}
 			<CommandSearch open={commandSearchOpen} onOpenChange={setCommandSearchOpen} />
diff --git a/apps/web/src/app/settings/layout.tsx b/apps/web/src/app/(settings)/layout.tsx
similarity index 94%
rename from apps/web/src/app/settings/layout.tsx
rename to apps/web/src/app/(settings)/layout.tsx
index f9e5c2a..1d06549 100644
--- a/apps/web/src/app/settings/layout.tsx
+++ b/apps/web/src/app/(settings)/layout.tsx
@@ -6,17 +6,7 @@ import { useActiveOrganization, useListOrganizations } from "@/lib/auth-client";
 import { organization } from "@/lib/auth-client";
 import { cn } from "@/lib/utils";
 import { env } from "@proliferate/environment/public";
-import {
-	ArrowLeft,
-	Building2,
-	CreditCard,
-	ExternalLink,
-	Key,
-	Plug,
-	Search,
-	User,
-	Users,
-} from "lucide-react";
+import { ArrowLeft, Building2, CreditCard, ExternalLink, Search, User, Users } from "lucide-react";
 import Link from "next/link";
 import { usePathname } from "next/navigation";
 
@@ -35,8 +25,6 @@ const NAV_ITEMS = [
 				? [{ id: "billing", label: "Billing", icon: CreditCard, href: "/settings/billing" }]
 				: []),
 			{ id: "members", label: "Members", icon: Users, href: "/settings/members" },
-			{ id: "secrets", label: "Secrets", icon: Key, href: "/settings/secrets" },
-			{ id: "tools", label: "Tools", icon: Plug, href: "/settings/tools" },
 		],
 	},
 ];
@@ -45,9 +33,7 @@ const PAGE_TITLES: Record<string, string> = {
 	profile: "Profile",
 	general: "General",
 	members: "Members",
-	secrets: "Secrets",
 	...(BILLING_ENABLED ? { billing: "Billing" } : {}),
-	tools: "Tools",
 };
 
 function getPageTitle(pathname: string) {
diff --git a/apps/web/src/app/settings/billing/page.tsx b/apps/web/src/app/(settings)/settings/billing/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/billing/page.tsx
rename to apps/web/src/app/(settings)/settings/billing/page.tsx
diff --git a/apps/web/src/app/settings/connections/page.tsx b/apps/web/src/app/(settings)/settings/connections/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/connections/page.tsx
rename to apps/web/src/app/(settings)/settings/connections/page.tsx
diff --git a/apps/web/src/app/settings/general/page.tsx b/apps/web/src/app/(settings)/settings/general/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/general/page.tsx
rename to apps/web/src/app/(settings)/settings/general/page.tsx
diff --git a/apps/web/src/app/settings/members/page.tsx b/apps/web/src/app/(settings)/settings/members/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/members/page.tsx
rename to apps/web/src/app/(settings)/settings/members/page.tsx
diff --git a/apps/web/src/app/settings/page.tsx b/apps/web/src/app/(settings)/settings/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/page.tsx
rename to apps/web/src/app/(settings)/settings/page.tsx
diff --git a/apps/web/src/app/settings/profile/page.tsx b/apps/web/src/app/(settings)/settings/profile/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/profile/page.tsx
rename to apps/web/src/app/(settings)/settings/profile/page.tsx
diff --git a/apps/web/src/app/settings/repositories/page.tsx b/apps/web/src/app/(settings)/settings/repositories/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/repositories/page.tsx
rename to apps/web/src/app/(settings)/settings/repositories/page.tsx
diff --git a/apps/web/src/app/settings/secrets/page.tsx b/apps/web/src/app/(settings)/settings/secrets/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/secrets/page.tsx
rename to apps/web/src/app/(settings)/settings/secrets/page.tsx
diff --git a/apps/web/src/app/settings/tools/page.tsx b/apps/web/src/app/(settings)/settings/tools/page.tsx
similarity index 100%
rename from apps/web/src/app/settings/tools/page.tsx
rename to apps/web/src/app/(settings)/settings/tools/page.tsx
diff --git a/apps/web/src/app/(studio)/layout.tsx b/apps/web/src/app/(studio)/layout.tsx
new file mode 100644
index 0000000..3ab5e80
--- /dev/null
+++ b/apps/web/src/app/(studio)/layout.tsx
@@ -0,0 +1,99 @@
+"use client";
+
+import { StudioSidebar } from "@/components/studio/sidebar";
+import { useAttentionInbox } from "@/hooks/use-attention-inbox";
+import { useBilling } from "@/hooks/use-billing";
+import { useSession } from "@/lib/auth-client";
+import { cn } from "@/lib/utils";
+import { env } from "@proliferate/environment/public";
+import { Inbox } from "lucide-react";
+import Link from "next/link";
+import { useRouter } from "next/navigation";
+import { useEffect } from "react";
+
+export default function StudioLayout({
+	children,
+}: {
+	children: React.ReactNode;
+}) {
+	const router = useRouter();
+	const { data: session, isPending: authPending } = useSession();
+	const billingEnabled = env.NEXT_PUBLIC_BILLING_ENABLED;
+	const { data: billingInfo, isLoading: billingLoading, isError: billingError } = useBilling();
+	const needsOnboarding = billingEnabled && billingInfo?.state.billingState === "unconfigured";
+
+	const inboxItems = useAttentionInbox({ wsApprovals: [] });
+	const inboxCount = inboxItems.length;
+
+	// Redirect to sign-in if not authenticated
+	useEffect(() => {
+		if (!authPending && !session) {
+			router.push("/sign-in");
+		}
+	}, [session, authPending, router]);
+
+	// Redirect to verify-email if email not verified
+	const requireEmailVerification = env.NEXT_PUBLIC_ENFORCE_EMAIL_VERIFICATION;
+	useEffect(() => {
+		if (!authPending && session && requireEmailVerification && !session.user?.emailVerified) {
+			router.push("/auth/verify-email");
+		}
+	}, [session, authPending, router, requireEmailVerification]);
+
+	// Keep onboarding/billing progression required
+	useEffect(() => {
+		if (!authPending && session && !billingLoading && needsOnboarding) {
+			router.push("/onboarding");
+		}
+	}, [authPending, session, billingLoading, needsOnboarding, router]);
+
+	// Wait for required gate checks before rendering anything
+	if (authPending || (billingEnabled && (billingLoading || billingError))) {
+		return <div className="min-h-screen bg-background" />;
+	}
+
+	if (!session) {
+		return null;
+	}
+
+	if (needsOnboarding) {
+		return null;
+	}
+
+	return (
+		<div className="h-screen flex flex-col bg-background">
+			{/* Minimal top bar — discrete breadcrumb/OS title bar feel */}
+			<header className="h-9 flex items-center justify-between px-3 border-b border-border/50 shrink-0">
+				<Link
+					href="/dashboard"
+					className="text-[12px] font-medium text-muted-foreground/60 hover:text-foreground transition-colors tracking-tight"
+				>
+					Proliferate
+				</Link>
+				<Link href="/dashboard/inbox">
+					<button
+						type="button"
+						className={cn(
+							"flex items-center gap-1.5 h-6 px-2 rounded-md text-[12px] font-medium transition-colors",
+							inboxCount > 0 ? "text-foreground" : "text-muted-foreground/60 hover:text-foreground",
+						)}
+					>
+						<Inbox className="h-3 w-3" />
+						Inbox
+						{inboxCount > 0 && (
+							<span className="h-4 min-w-4 rounded-full bg-foreground text-background text-[10px] font-mono font-medium flex items-center justify-center px-1">
+								{inboxCount > 99 ? "99+" : inboxCount}
+							</span>
+						)}
+					</button>
+				</Link>
+			</header>
+
+			{/* Main layout: Sidebar + Content */}
+			<div className="flex-1 flex min-h-0">
+				<StudioSidebar />
+				<main className="flex-1 min-h-0 min-w-0">{children}</main>
+			</div>
+		</div>
+	);
+}
diff --git a/apps/web/src/app/dashboard/sessions/[id]/page.tsx b/apps/web/src/app/(studio)/workspace/[id]/page.tsx
similarity index 61%
rename from apps/web/src/app/dashboard/sessions/[id]/page.tsx
rename to apps/web/src/app/(studio)/workspace/[id]/page.tsx
index 9f75c9d..71f4858 100644
--- a/apps/web/src/app/dashboard/sessions/[id]/page.tsx
+++ b/apps/web/src/app/(studio)/workspace/[id]/page.tsx
@@ -2,14 +2,18 @@
 
 export const dynamic = "force-dynamic";
 
-import { CodingSession } from "@/components/coding-session/coding-session";
+import { CodingSession } from "@/components/coding-session";
 import { organization, useActiveOrganization } from "@/lib/auth-client";
 import { useDashboardStore } from "@/stores/dashboard";
-import { X, Zap } from "lucide-react";
 import { useSearchParams } from "next/navigation";
 import { use, useEffect, useMemo, useState } from "react";
 
-export default function SessionDetailPage({
+/**
+ * Active workspace session — the Studio's primary view.
+ * Renders the full CodingSession component in full-bleed layout.
+ * Handles org switching for cross-org session links (e.g., from automation runs).
+ */
+export default function WorkspaceSessionPage({
 	params,
 }: {
 	params: Promise<{ id: string }>;
@@ -21,8 +25,6 @@ export default function SessionDetailPage({
 	const { data: activeOrg, isPending: isOrgPending } = useActiveOrganization();
 	const [switchError, setSwitchError] = useState<string | null>(null);
 	const [isSwitching, setIsSwitching] = useState(false);
-	const fromAutomation = searchParams.get("from") === "automation";
-	const [showAutomationBanner, setShowAutomationBanner] = useState(fromAutomation);
 	const shouldSwitchOrg = useMemo(
 		() => Boolean(targetOrgId && activeOrg?.id && activeOrg.id !== targetOrgId),
 		[targetOrgId, activeOrg?.id],
@@ -34,7 +36,7 @@ export default function SessionDetailPage({
 		organization
 			.setActive({ organizationId: targetOrgId })
 			.then(() => {
-				window.location.replace(`/dashboard/sessions/${id}?orgId=${targetOrgId}`);
+				window.location.replace(`/workspace/${id}?orgId=${targetOrgId}`);
 			})
 			.catch((err) => {
 				console.error("Failed to switch organization:", err);
@@ -65,30 +67,13 @@ export default function SessionDetailPage({
 	}
 
 	return (
-		<div className="h-full flex flex-col">
-			{showAutomationBanner && (
-				<div className="flex items-center gap-2 px-4 py-2 bg-muted/60 border-b border-border text-sm text-muted-foreground shrink-0">
-					<Zap className="h-3.5 w-3.5" />
-					<span>Resumed from Automation</span>
-					<button
-						type="button"
-						onClick={() => setShowAutomationBanner(false)}
-						className="ml-auto text-muted-foreground/60 hover:text-foreground transition-colors"
-					>
-						<X className="h-3.5 w-3.5" />
-					</button>
-				</div>
-			)}
-			<div className="flex-1 min-h-0">
-				<CodingSession
-					sessionId={id}
-					initialPrompt={pendingPrompt || undefined}
-					onError={(error) => {
-						console.error("Session error:", error);
-						clearPendingPrompt();
-					}}
-				/>
-			</div>
-		</div>
+		<CodingSession
+			sessionId={id}
+			initialPrompt={pendingPrompt || undefined}
+			onError={(error) => {
+				console.error("Session error:", error);
+				clearPendingPrompt();
+			}}
+		/>
 	);
 }
diff --git a/apps/web/src/app/(studio)/workspace/page.tsx b/apps/web/src/app/(studio)/workspace/page.tsx
new file mode 100644
index 0000000..6b88ba0
--- /dev/null
+++ b/apps/web/src/app/(studio)/workspace/page.tsx
@@ -0,0 +1,68 @@
+"use client";
+
+export const dynamic = "force-dynamic";
+
+import { useDashboardStore } from "@/stores/dashboard";
+import { ArrowRight } from "lucide-react";
+import { useRouter } from "next/navigation";
+import { useState } from "react";
+
+/**
+ * Workspace empty state — Raycast-style floating command palette.
+ * Massive container with backdrop blur, shadow, borderless input.
+ */
+export default function WorkspacePage() {
+	const router = useRouter();
+	const { setPendingPrompt } = useDashboardStore();
+	const [prompt, setPrompt] = useState("");
+
+	const handleSubmit = (e: React.FormEvent) => {
+		e.preventDefault();
+		const trimmed = prompt.trim();
+		if (!trimmed) return;
+		setPendingPrompt(trimmed);
+		router.push("/dashboard/sessions/new");
+	};
+
+	return (
+		<div className="h-full flex items-center justify-center p-4">
+			<div className="w-full max-w-2xl">
+				{/* Raycast-style floating palette */}
+				<form
+					onSubmit={handleSubmit}
+					className="relative rounded-xl border border-border/50 bg-background/80 backdrop-blur-xl shadow-2xl overflow-hidden"
+				>
+					<div className="px-5 pt-5 pb-2">
+						<p className="text-[13px] text-muted-foreground/60 font-medium tracking-tight">
+							What do you want to build?
+						</p>
+					</div>
+					<div className="flex items-center px-5 pb-4 gap-3">
+						<input
+							value={prompt}
+							onChange={(e) => setPrompt(e.target.value)}
+							placeholder="Describe your task..."
+							className="flex-1 bg-transparent text-lg font-medium text-foreground placeholder:text-muted-foreground/30 outline-none tracking-tight"
+							autoFocus
+						/>
+						<button
+							type="submit"
+							disabled={!prompt.trim()}
+							className="h-8 w-8 flex items-center justify-center rounded-lg bg-foreground text-background hover:bg-foreground/90 disabled:opacity-20 disabled:pointer-events-none transition-all shrink-0"
+						>
+							<ArrowRight className="h-4 w-4" />
+						</button>
+					</div>
+					<div className="px-5 py-2 border-t border-border/30 flex items-center gap-3 text-[11px] text-muted-foreground/40">
+						<span>
+							<kbd className="font-mono">Enter</kbd> to start
+						</span>
+						<span>
+							<kbd className="font-mono">⌘K</kbd> search sessions
+						</span>
+					</div>
+				</form>
+			</div>
+		</div>
+	);
+}
diff --git a/apps/web/src/app/dashboard/page.tsx b/apps/web/src/app/dashboard/page.tsx
deleted file mode 100644
index 6ba9e02..0000000
--- a/apps/web/src/app/dashboard/page.tsx
+++ /dev/null
@@ -1,37 +0,0 @@
-"use client";
-
-export const dynamic = "force-dynamic";
-
-import { EmptyDashboard } from "@/components/dashboard/empty-state";
-import { useAttentionInbox } from "@/hooks/use-attention-inbox";
-import { useDashboardStore } from "@/stores/dashboard";
-import { useRouter } from "next/navigation";
-import { useEffect } from "react";
-
-export default function DashboardPage() {
-	const router = useRouter();
-	const { activeSessionId, clearPendingPrompt } = useDashboardStore();
-	const inboxItems = useAttentionInbox({ wsApprovals: [] });
-
-	// If there's an active session, redirect to the session page
-	useEffect(() => {
-		if (activeSessionId) {
-			router.push(`/dashboard/sessions/${activeSessionId}`);
-		}
-	}, [activeSessionId, router]);
-
-	// If inbox has items and no active session, redirect to inbox
-	useEffect(() => {
-		if (!activeSessionId && inboxItems.length > 0) {
-			router.push("/dashboard/inbox");
-		}
-	}, [activeSessionId, inboxItems.length, router]);
-
-	// Clear any pending prompt when landing on this page
-	useEffect(() => {
-		clearPendingPrompt();
-	}, [clearPendingPrompt]);
-
-	// Show the new session creation empty state
-	return <EmptyDashboard />;
-}
diff --git a/apps/web/src/app/session/[id]/page.tsx b/apps/web/src/app/session/[id]/page.tsx
index afd7ffc..80b5cd2 100644
--- a/apps/web/src/app/session/[id]/page.tsx
+++ b/apps/web/src/app/session/[id]/page.tsx
@@ -1,16 +1,18 @@
 "use client";
 
-export const dynamic = "force-dynamic";
+import { useParams, useRouter } from "next/navigation";
+import { useEffect } from "react";
 
-import { CodingSession } from "@/components/coding-session";
-import { useParams } from "next/navigation";
-
-export default function SessionPage() {
+/**
+ * Legacy redirect: /session/:id → /workspace/:id
+ */
+export default function LegacySessionRedirect() {
 	const { id } = useParams();
+	const router = useRouter();
+
+	useEffect(() => {
+		router.replace(`/workspace/${id}`);
+	}, [id, router]);
 
-	return (
-		<div className="h-screen">
-			<CodingSession sessionId={id as string} />
-		</div>
-	);
+	return null;
 }
diff --git a/apps/web/src/components/coding-session/coding-session.tsx b/apps/web/src/components/coding-session/coding-session.tsx
index 73db3f7..f7686df 100644
--- a/apps/web/src/components/coding-session/coding-session.tsx
+++ b/apps/web/src/components/coding-session/coding-session.tsx
@@ -10,6 +10,7 @@ import { AssistantRuntimeProvider } from "@assistant-ui/react";
 import { Loader2 } from "lucide-react";
 import { useState } from "react";
 import { toast } from "sonner";
+import { PanelTabBar } from "./panel-tab-bar";
 import type { SessionPanelProps } from "./right-panel";
 import { RightPanel } from "./right-panel";
 import { SessionHeader } from "./session-header";
@@ -96,8 +97,15 @@ export function CodingSession({
 		}
 	};
 
-	const { mode, toggleUrlPreview, togglePanel, mobileView, toggleMobileView } =
-		usePreviewPanelStore();
+	const {
+		mode,
+		toggleUrlPreview,
+		togglePanel,
+		mobileView,
+		toggleMobileView,
+		close,
+		setMobileView,
+	} = usePreviewPanelStore();
 	const isPanelOpen = mode.type !== "none";
 	const [secretsModalOpen, setSecretsModalOpen] = useState(false);
 
@@ -192,26 +200,47 @@ export function CodingSession({
 					</SessionContext.Provider>
 				</div>
 
-				{/* Right panel — buttons above + rounded card */}
+				{/* Right panel — tab bar + content panel */}
 				{isPanelOpen && (
 					<div
-						className={`hidden md:flex md:flex-col md:w-1/2 p-2 gap-1 ${mobileView === "preview" ? "!flex w-full" : ""}`}
+						className={`hidden md:flex md:flex-col md:w-1/2 border-l border-border bg-muted/30 ${mobileView === "preview" ? "!flex w-full" : ""}`}
 					>
-						<div className="flex justify-start shrink-0 px-1">
-							<SessionHeader
-								error={error}
-								panelMode={mode}
-								onTogglePreview={() => toggleUrlPreview(previewUrl)}
-								onToggleSettings={() => togglePanel("settings")}
-								onToggleGit={() => togglePanel("git")}
-								onToggleTerminal={() => togglePanel("terminal")}
-								onToggleVscode={() => togglePanel("vscode")}
-								onToggleArtifacts={() => togglePanel("artifacts")}
-								mobileView={mobileView}
-								onToggleMobileView={toggleMobileView}
-							/>
-						</div>
-						<div className="flex-1 min-h-0 rounded-xl border bg-background overflow-hidden">
+						<PanelTabBar
+							tabs={[
+								{
+									id: "terminal",
+									label: "Terminal",
+									isActive: mode.type === "terminal",
+									onClick: () => togglePanel("terminal"),
+								},
+								{
+									id: "git",
+									label: "Changes",
+									isActive: mode.type === "git",
+									onClick: () => togglePanel("git"),
+								},
+								{
+									id: "preview",
+									label: "Preview",
+									isActive: mode.type === "url",
+									onClick: () => toggleUrlPreview(previewUrl),
+								},
+								{
+									id: "artifacts",
+									label: "Artifacts",
+									isActive:
+										mode.type === "artifacts" || mode.type === "file" || mode.type === "gallery",
+									onClick: () => togglePanel("artifacts"),
+								},
+							]}
+							onToggleSettings={() => togglePanel("settings")}
+							settingsActive={mode.type === "settings"}
+							onClose={() => {
+								close();
+								setMobileView("chat");
+							}}
+						/>
+						<div className="flex-1 min-h-0 overflow-hidden">
 							<RightPanel
 								isMobileFullScreen={mobileView === "preview"}
 								sessionProps={sessionPanelProps}
diff --git a/apps/web/src/components/coding-session/panel-tab-bar.tsx b/apps/web/src/components/coding-session/panel-tab-bar.tsx
new file mode 100644
index 0000000..2a44aa4
--- /dev/null
+++ b/apps/web/src/components/coding-session/panel-tab-bar.tsx
@@ -0,0 +1,74 @@
+"use client";
+
+import { cn } from "@/lib/utils";
+import { Settings, X } from "lucide-react";
+
+interface PanelTab {
+	id: string;
+	label: string;
+	badge?: number | null;
+	isActive: boolean;
+	onClick: () => void;
+}
+
+interface PanelTabBarProps {
+	tabs: PanelTab[];
+	onToggleSettings?: () => void;
+	onClose: () => void;
+	settingsActive?: boolean;
+}
+
+/**
+ * IDE-style tab bar — no thick underlines.
+ * Active state: text contrast + subtle background shift.
+ */
+export function PanelTabBar({ tabs, onToggleSettings, onClose, settingsActive }: PanelTabBarProps) {
+	return (
+		<div className="flex items-center border-b border-border/50 px-1 h-8 shrink-0 bg-background">
+			{/* Tabs */}
+			<div className="flex items-center gap-0.5 flex-1 min-w-0">
+				{tabs.map((tab) => (
+					<button
+						key={tab.id}
+						type="button"
+						onClick={tab.onClick}
+						className={cn(
+							"px-2.5 py-1 text-[12px] font-medium tracking-wide rounded-sm transition-colors",
+							tab.isActive
+								? "text-foreground bg-muted/60"
+								: "text-muted-foreground hover:text-foreground",
+						)}
+					>
+						{tab.label}
+						{tab.badge != null && tab.badge > 0 && (
+							<span className="ml-1 font-mono text-[10px] text-muted-foreground">{tab.badge}</span>
+						)}
+					</button>
+				))}
+			</div>
+
+			{/* Right controls */}
+			<div className="flex items-center gap-0.5 shrink-0">
+				{onToggleSettings && (
+					<button
+						type="button"
+						onClick={onToggleSettings}
+						className={cn(
+							"p-1 rounded-sm transition-colors",
+							settingsActive ? "text-foreground" : "text-muted-foreground hover:text-foreground",
+						)}
+					>
+						<Settings className="h-3 w-3" />
+					</button>
+				)}
+				<button
+					type="button"
+					onClick={onClose}
+					className="p-1 rounded-sm text-muted-foreground hover:text-foreground transition-colors"
+				>
+					<X className="h-3 w-3" />
+				</button>
+			</div>
+		</div>
+	);
+}
diff --git a/apps/web/src/components/command-center/sidebar.tsx b/apps/web/src/components/command-center/sidebar.tsx
new file mode 100644
index 0000000..5832c57
--- /dev/null
+++ b/apps/web/src/components/command-center/sidebar.tsx
@@ -0,0 +1,558 @@
+"use client";
+
+import { SearchTrigger } from "@/components/dashboard/command-search";
+import { openIntercomMessenger } from "@/components/providers";
+import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
+import { Button } from "@/components/ui/button";
+import { SidebarCollapseIcon, SidebarExpandIcon, SlackIcon } from "@/components/ui/icons";
+import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover";
+import { Sheet, SheetContent } from "@/components/ui/sheet";
+import { Text } from "@/components/ui/text";
+import { useAttentionInbox } from "@/hooks/use-attention-inbox";
+import { useSlackStatus } from "@/hooks/use-integrations";
+import { useSignOut } from "@/hooks/use-sign-out";
+import { useSession } from "@/lib/auth-client";
+import { cn } from "@/lib/utils";
+import { useDashboardStore } from "@/stores/dashboard";
+import {
+	FileStackIcon,
+	FolderGit2,
+	Inbox,
+	LifeBuoy,
+	LogOut,
+	Menu,
+	MessageCircle,
+	Moon,
+	Plug,
+	Plus,
+	Settings,
+	Sun,
+	X,
+} from "lucide-react";
+import { useTheme } from "next-themes";
+import { usePathname, useRouter } from "next/navigation";
+import { useState } from "react";
+
+/**
+ * Command Center sidebar — management world only.
+ * Tight, IDE-dense nav. No session list — that lives in the Studio sidebar.
+ */
+
+// Mobile sidebar trigger button
+export function CCMobileSidebarTrigger() {
+	const { setMobileSidebarOpen } = useDashboardStore();
+
+	return (
+		<Button
+			variant="ghost"
+			size="icon"
+			className="h-8 w-8 md:hidden"
+			onClick={() => setMobileSidebarOpen(true)}
+		>
+			<Menu className="h-4 w-4" />
+			<span className="sr-only">Open menu</span>
+		</Button>
+	);
+}
+
+// Mobile sidebar drawer
+export function CCMobileSidebar() {
+	const { mobileSidebarOpen, setMobileSidebarOpen } = useDashboardStore();
+
+	return (
+		<Sheet open={mobileSidebarOpen} onOpenChange={setMobileSidebarOpen}>
+			<SheetContent side="left" className="w-full max-w-full p-0">
+				<CCSidebarContent
+					onNavigate={() => setMobileSidebarOpen(false)}
+					onClose={() => setMobileSidebarOpen(false)}
+				/>
+			</SheetContent>
+		</Sheet>
+	);
+}
+
+// Desktop sidebar
+export function CCSidebar() {
+	const { sidebarCollapsed, toggleSidebar } = useDashboardStore();
+	const pathname = usePathname();
+	const router = useRouter();
+
+	const isInboxPage = pathname?.startsWith("/dashboard/inbox");
+	const isIntegrationsPage = pathname?.startsWith("/dashboard/integrations");
+	const isAutomationsPage = pathname?.startsWith("/dashboard/automations");
+	const isRepositoriesPage = pathname?.startsWith("/dashboard/repositories");
+
+	const inboxItems = useAttentionInbox({ wsApprovals: [] });
+	const inboxCount = inboxItems.length;
+
+	return (
+		<aside
+			className={cn(
+				"hidden md:flex h-full flex-col border-r border-border/50 bg-sidebar text-sidebar-foreground overflow-hidden",
+				"transition-[width] duration-200 ease-out",
+				sidebarCollapsed
+					? "w-11 cursor-pointer hover:bg-accent/50 transition-colors"
+					: "w-60",
+			)}
+			onClick={sidebarCollapsed ? toggleSidebar : undefined}
+		>
+			{/* Collapsed view — icon-only nav */}
+			<div
+				className={cn(
+					"flex flex-col items-center h-full py-2 gap-0.5 transition-opacity duration-150",
+					sidebarCollapsed
+						? "opacity-100"
+						: "opacity-0 pointer-events-none absolute inset-0",
+				)}
+			>
+				<button
+					type="button"
+					className="h-7 w-7 flex items-center justify-center rounded-md text-muted-foreground hover:text-foreground transition-colors"
+					onClick={(e) => {
+						e.stopPropagation();
+						toggleSidebar();
+					}}
+					title="Expand sidebar"
+				>
+					<SidebarExpandIcon className="h-3.5 w-3.5" />
+				</button>
+				<div className="my-0.5" />
+				<button
+					type="button"
+					className="h-7 w-7 flex items-center justify-center rounded-md text-muted-foreground hover:text-foreground transition-colors"
+					onClick={(e) => {
+						e.stopPropagation();
+						router.push("/workspace");
+					}}
+					title="New session"
+				>
+					<Plus className="h-3.5 w-3.5" />
+				</button>
+				<button
+					type="button"
+					className={cn(
+						"h-7 w-7 flex items-center justify-center rounded-md transition-colors relative",
+						isInboxPage
+							? "bg-muted text-foreground"
+							: "text-muted-foreground hover:text-foreground",
+					)}
+					onClick={(e) => {
+						e.stopPropagation();
+						router.push("/dashboard/inbox");
+					}}
+					title="Inbox"
+				>
+					<Inbox className="h-3.5 w-3.5" />
+					{inboxCount > 0 && (
+						<span className="absolute -top-0.5 -right-0.5 h-3.5 min-w-3.5 rounded-full bg-foreground text-background text-[9px] font-mono font-medium flex items-center justify-center px-0.5">
+							{inboxCount > 9 ? "9+" : inboxCount}
+						</span>
+					)}
+				</button>
+				<button
+					type="button"
+					className={cn(
+						"h-7 w-7 flex items-center justify-center rounded-md transition-colors",
+						isRepositoriesPage
+							? "bg-muted text-foreground"
+							: "text-muted-foreground hover:text-foreground",
+					)}
+					onClick={(e) => {
+						e.stopPropagation();
+						router.push("/dashboard/repositories");
+					}}
+					title="Repositories"
+				>
+					<FolderGit2 className="h-3.5 w-3.5" />
+				</button>
+				<div className="my-0.5" />
+				<button
+					type="button"
+					className={cn(
+						"h-7 w-7 flex items-center justify-center rounded-md transition-colors",
+						isAutomationsPage
+							? "bg-muted text-foreground"
+							: "text-muted-foreground hover:text-foreground",
+					)}
+					onClick={(e) => {
+						e.stopPropagation();
+						router.push("/dashboard/automations");
+					}}
+					title="Automations"
+				>
+					<FileStackIcon className="h-3.5 w-3.5" />
+				</button>
+				<button
+					type="button"
+					className={cn(
+						"h-7 w-7 flex items-center justify-center rounded-md transition-colors",
+						isIntegrationsPage
+							? "bg-muted text-foreground"
+							: "text-muted-foreground hover:text-foreground",
+					)}
+					onClick={(e) => {
+						e.stopPropagation();
+						router.push("/dashboard/integrations");
+					}}
+					title="Integrations"
+				>
+					<Plug className="h-3.5 w-3.5" />
+				</button>
+			</div>
+
+			{/* Full content */}
+			<div
+				className={cn(
+					"w-60 flex flex-col h-full transition-opacity duration-200",
+					sidebarCollapsed ? "opacity-0 pointer-events-none" : "opacity-100",
+				)}
+			>
+				<CCSidebarContent showCollapseButton />
+			</div>
+		</aside>
+	);
+}
+
+// Shared sidebar content — used by both desktop and mobile
+function CCSidebarContent({
+	onNavigate,
+	onClose,
+	showCollapseButton = false,
+}: {
+	onNavigate?: () => void;
+	onClose?: () => void;
+	showCollapseButton?: boolean;
+}) {
+	const pathname = usePathname();
+	const router = useRouter();
+	const handleSignOut = useSignOut();
+	const { data: authSession } = useSession();
+	const { theme, resolvedTheme, setTheme } = useTheme();
+	const [userMenuOpen, setUserMenuOpen] = useState(false);
+	const [supportMenuOpen, setSupportMenuOpen] = useState(false);
+
+	const { data: slackStatus } = useSlackStatus();
+	const { toggleSidebar, setCommandSearchOpen } = useDashboardStore();
+
+	const user = authSession?.user;
+	const userInitials = user?.name
+		? user.name
+				.split(" ")
+				.map((n) => n[0])
+				.join("")
+				.toUpperCase()
+				.slice(0, 2)
+		: user?.email?.[0]?.toUpperCase() || "?";
+
+	const isInboxPage = pathname?.startsWith("/dashboard/inbox");
+	const isAutomationsPage = pathname?.startsWith("/dashboard/automations");
+	const isIntegrationsPage = pathname?.startsWith("/dashboard/integrations");
+	const isRepositoriesPage = pathname?.startsWith("/dashboard/repositories");
+
+	const inboxItems = useAttentionInbox({ wsApprovals: [] });
+	const inboxCount = inboxItems.length;
+
+	const handleNavigate = (path: string) => {
+		router.push(path);
+		onNavigate?.();
+	};
+
+	return (
+		<>
+			{/* Top section: Logo + Collapse/Close */}
+			<div className="px-3 py-2.5 flex items-center justify-between gap-2">
+				<img
+					src={
+						resolvedTheme === "dark"
+							? "https://d1uh4o7rpdqkkl.cloudfront.net/logotype-inverted.webp"
+							: "https://d1uh4o7rpdqkkl.cloudfront.net/logotype.webp"
+					}
+					alt="Proliferate"
+					className="h-4"
+				/>
+				<div className="flex items-center gap-0.5">
+					{showCollapseButton && (
+						<button
+							type="button"
+							className="h-6 w-6 flex items-center justify-center rounded-md text-muted-foreground hover:text-foreground transition-colors"
+							onClick={toggleSidebar}
+							title="Collapse sidebar"
+						>
+							<SidebarCollapseIcon className="h-3.5 w-3.5" />
+						</button>
+					)}
+					{onClose && (
+						<button
+							type="button"
+							className="h-6 w-6 flex items-center justify-center rounded-md text-muted-foreground hover:text-foreground transition-colors"
+							onClick={onClose}
+							title="Close menu"
+						>
+							<X className="h-3.5 w-3.5" />
+						</button>
+					)}
+				</div>
+			</div>
+
+			{/* New Session (teleports to Studio) + Search */}
+			<div className="px-2 mb-1 space-y-0.5">
+				<button
+					type="button"
+					onClick={() => {
+						router.push("/workspace");
+						onNavigate?.();
+					}}
+					className="flex items-center gap-2 w-full px-2 h-7 rounded-md bg-foreground text-background hover:bg-foreground/90 transition-colors text-[13px] font-medium"
+				>
+					<Plus className="h-3.5 w-3.5" />
+					<span>New Session</span>
+				</button>
+				<SearchTrigger onClick={() => setCommandSearchOpen(true)} />
+			</div>
+
+			{/* Workspace section */}
+			<div className="px-2 mb-0.5">
+				<div className="px-2 py-1 text-[10px] font-medium text-muted-foreground/50 uppercase tracking-wider">
+					Workspace
+				</div>
+				<button
+					type="button"
+					onClick={() => handleNavigate("/dashboard/inbox")}
+					className={cn(
+						"flex items-center gap-2 w-full px-2 h-7 rounded-md text-[13px] transition-colors",
+						isInboxPage
+							? "bg-muted text-foreground"
+							: "text-muted-foreground hover:text-foreground hover:bg-accent/50",
+					)}
+				>
+					<Inbox className="h-3.5 w-3.5" />
+					<span>Inbox</span>
+					{inboxCount > 0 && (
+						<span className="ml-auto h-4 min-w-4 rounded-full bg-foreground text-background text-[10px] font-mono font-medium flex items-center justify-center px-1">
+							{inboxCount > 99 ? "99+" : inboxCount}
+						</span>
+					)}
+				</button>
+				<button
+					type="button"
+					onClick={() => handleNavigate("/dashboard/repositories")}
+					className={cn(
+						"flex items-center gap-2 w-full px-2 h-7 rounded-md text-[13px] transition-colors",
+						isRepositoriesPage
+							? "bg-muted text-foreground"
+							: "text-muted-foreground hover:text-foreground hover:bg-accent/50",
+					)}
+				>
+					<FolderGit2 className="h-3.5 w-3.5" />
+					<span>Repositories</span>
+				</button>
+			</div>
+
+			{/* Agents section */}
+			<div className="px-2 mb-2">
+				<div className="px-2 py-1 text-[10px] font-medium text-muted-foreground/50 uppercase tracking-wider">
+					Agents
+				</div>
+				<button
+					type="button"
+					onClick={() => handleNavigate("/dashboard/automations")}
+					className={cn(
+						"flex items-center gap-2 w-full px-2 h-7 rounded-md text-[13px] transition-colors",
+						isAutomationsPage
+							? "bg-muted text-foreground"
+							: "text-muted-foreground hover:text-foreground hover:bg-accent/50",
+					)}
+				>
+					<FileStackIcon className="h-3.5 w-3.5" />
+					<span>Automations</span>
+				</button>
+				<button
+					type="button"
+					onClick={() => handleNavigate("/dashboard/integrations")}
+					className={cn(
+						"flex items-center gap-2 w-full px-2 h-7 rounded-md text-[13px] transition-colors",
+						isIntegrationsPage
+							? "bg-muted text-foreground"
+							: "text-muted-foreground hover:text-foreground hover:bg-accent/50",
+					)}
+				>
+					<Plug className="h-3.5 w-3.5" />
+					<span>Integrations</span>
+				</button>
+			</div>
+
+			{/* Spacer — no threads section in Command Center */}
+			<div className="flex-1" />
+
+			{/* Footer with Support button and user card */}
+			<div className="border-t border-border/50">
+				{/* Support button with popover */}
+				<div className="px-2 pt-2 pb-0.5">
+					<Popover open={supportMenuOpen} onOpenChange={setSupportMenuOpen}>
+						<PopoverTrigger asChild>
+							<button
+								type="button"
+								className="w-full flex items-center justify-center gap-1.5 px-2 h-7 rounded-md text-[13px] font-medium border border-border/40 text-muted-foreground hover:text-foreground hover:border-border/60 transition-colors"
+							>
+								<LifeBuoy className="h-3.5 w-3.5" />
+								<span>Support</span>
+							</button>
+						</PopoverTrigger>
+						<PopoverContent
+							side="top"
+							align="start"
+							className="w-[min(15rem,calc(100vw-2rem))] p-1 z-[60]"
+							sideOffset={6}
+						>
+							<div className="flex flex-col">
+								<button
+									type="button"
+									className="flex items-center gap-2.5 px-2.5 py-2 text-[13px] rounded-md hover:bg-muted transition-colors text-left"
+									onClick={() => {
+										setSupportMenuOpen(false);
+										openIntercomMessenger();
+									}}
+								>
+									<MessageCircle className="h-3.5 w-3.5 text-muted-foreground" />
+									<div className="flex-1">
+										<div className="font-medium">Chat with us</div>
+										<div className="text-[11px] text-muted-foreground">
+											Get help instantly
+										</div>
+									</div>
+								</button>
+
+								{slackStatus?.connected && slackStatus?.supportChannel && (
+									<>
+										<div className="my-0.5 h-px bg-border/50" />
+										<button
+											type="button"
+											className="flex items-center gap-2.5 px-2.5 py-2 text-[13px] rounded-md hover:bg-muted transition-colors text-left"
+											onClick={() => {
+												setSupportMenuOpen(false);
+												const slackUrl =
+													slackStatus.supportChannel?.inviteUrl ||
+													(slackStatus.teamId &&
+													slackStatus.supportChannel?.channelId
+														? `https://app.slack.com/client/${slackStatus.teamId}/${slackStatus.supportChannel.channelId}`
+														: null);
+												if (slackUrl) {
+													window.open(slackUrl, "_blank");
+												} else {
+													onNavigate?.();
+													router.push("/dashboard/integrations");
+												}
+											}}
+										>
+											<SlackIcon className="h-3.5 w-3.5" />
+											<div className="flex-1">
+												<div className="font-medium flex items-center gap-1.5">
+													Slack Connect
+													<span className="text-[10px] bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 px-1 py-0.5 rounded font-mono">
+														Active
+													</span>
+												</div>
+												<div className="text-[11px] text-muted-foreground">
+													#{slackStatus.supportChannel.channelName}
+												</div>
+											</div>
+										</button>
+									</>
+								)}
+							</div>
+						</PopoverContent>
+					</Popover>
+				</div>
+
+				{/* User card with popover */}
+				<div className="p-2 pt-1">
+					<Popover open={userMenuOpen} onOpenChange={setUserMenuOpen}>
+						<PopoverTrigger asChild>
+							<button
+								type="button"
+								className="flex items-center gap-2.5 w-full p-2 rounded-lg hover:bg-muted/50 transition-colors text-left"
+							>
+								<Avatar className="h-6 w-6">
+									<AvatarImage
+										src={user?.image || undefined}
+										alt={user?.name || "User"}
+									/>
+									<AvatarFallback className="text-[10px]">
+										{userInitials}
+									</AvatarFallback>
+								</Avatar>
+								<div className="flex-1 min-w-0">
+									<Text
+										variant="small"
+										className="text-[13px] font-medium truncate block leading-tight"
+									>
+										{user?.name || "User"}
+									</Text>
+									<Text
+										variant="small"
+										color="muted"
+										className="text-[11px] truncate block leading-tight"
+									>
+										{user?.email || ""}
+									</Text>
+								</div>
+							</button>
+						</PopoverTrigger>
+						<PopoverContent
+							side="top"
+							align="end"
+							className="w-48 p-1 z-[60]"
+							sideOffset={6}
+						>
+							<div className="flex flex-col">
+								<button
+									type="button"
+									className="flex items-center gap-2 px-2.5 py-1.5 text-[13px] rounded-md hover:bg-muted transition-colors text-left"
+									onClick={() => {
+										setUserMenuOpen(false);
+										onNavigate?.();
+										router.push("/settings");
+									}}
+								>
+									<Settings className="h-3.5 w-3.5" />
+									Settings
+								</button>
+								<button
+									type="button"
+									className="flex items-center justify-between px-2.5 py-1.5 text-[13px] rounded-md hover:bg-muted transition-colors"
+									onClick={() =>
+										setTheme(theme === "dark" ? "light" : "dark")
+									}
+								>
+									<div className="flex items-center gap-2">
+										{theme === "dark" ? (
+											<Moon className="h-3.5 w-3.5" />
+										) : (
+											<Sun className="h-3.5 w-3.5" />
+										)}
+										{theme === "dark" ? "Dark mode" : "Light mode"}
+									</div>
+									<span className="text-[11px] text-muted-foreground font-mono">
+										{theme === "dark" ? "On" : "Off"}
+									</span>
+								</button>
+								<div className="my-0.5 h-px bg-border/50" />
+								<button
+									type="button"
+									className="flex items-center gap-2 px-2.5 py-1.5 text-[13px] rounded-md hover:bg-muted transition-colors text-left text-muted-foreground hover:text-foreground"
+									onClick={() => {
+										setUserMenuOpen(false);
+										handleSignOut();
+									}}
+								>
+									<LogOut className="h-3.5 w-3.5" />
+									Log out
+								</button>
+							</div>
+						</PopoverContent>
+					</Popover>
+				</div>
+			</div>
+		</>
+	);
+}
diff --git a/apps/web/src/components/dashboard/session-item.tsx b/apps/web/src/components/dashboard/session-item.tsx
index b93c824..ae469f2 100644
--- a/apps/web/src/components/dashboard/session-item.tsx
+++ b/apps/web/src/components/dashboard/session-item.tsx
@@ -94,7 +94,7 @@ export function SessionItem({ session, isActive, onNavigate }: SessionItemProps)
 	const handleClick = () => {
 		clearPendingPrompt();
 		setActiveSession(session.id);
-		router.push(`/dashboard/sessions/${session.id}`);
+		router.push(`/workspace/${session.id}`);
 		onNavigate?.();
 	};
 
diff --git a/apps/web/src/components/inbox/inbox-empty.tsx b/apps/web/src/components/inbox/inbox-empty.tsx
index d580898..6f81373 100644
--- a/apps/web/src/components/inbox/inbox-empty.tsx
+++ b/apps/web/src/components/inbox/inbox-empty.tsx
@@ -1,13 +1,17 @@
 "use client";
 
-import { CheckCircle2 } from "lucide-react";
+import { Inbox } from "lucide-react";
 
 export function InboxEmpty() {
 	return (
-		<div className="flex flex-col items-center justify-center py-20 text-center">
-			<CheckCircle2 className="h-12 w-12 text-muted-foreground/30 mb-4" />
-			<h2 className="text-lg font-medium mb-1">All clear</h2>
-			<p className="text-muted-foreground text-sm">No items need your attention</p>
+		<div className="flex flex-col items-center justify-center py-24 text-center">
+			<div className="h-10 w-10 rounded-lg border border-border/50 bg-muted/30 flex items-center justify-center mb-3">
+				<Inbox className="h-4 w-4 text-muted-foreground/40" />
+			</div>
+			<h2 className="text-[13px] font-medium tracking-tight mb-0.5">Inbox Zero</h2>
+			<p className="text-muted-foreground/60 text-[12px] max-w-[16rem]">
+				Your agents are working quietly. Approvals and paused runs will appear here.
+			</p>
 		</div>
 	);
 }
diff --git a/apps/web/src/components/inbox/inbox-item.tsx b/apps/web/src/components/inbox/inbox-item.tsx
index f4a0557..4a43833 100644
--- a/apps/web/src/components/inbox/inbox-item.tsx
+++ b/apps/web/src/components/inbox/inbox-item.tsx
@@ -135,7 +135,7 @@ function ApprovalItem({ data }: { data: ApprovalWithSession }) {
 					</p>
 					{sessionTitle && (
 						<Link
-							href={`/dashboard/sessions/${sessionId}`}
+							href={`/workspace/${sessionId}`}
 							className="text-xs text-muted-foreground hover:text-foreground hover:underline mt-1 inline-block"
 						>
 							{sessionTitle}
@@ -143,7 +143,7 @@ function ApprovalItem({ data }: { data: ApprovalWithSession }) {
 					)}
 					{!sessionTitle && sessionId && (
 						<Link
-							href={`/dashboard/sessions/${sessionId}`}
+							href={`/workspace/${sessionId}`}
 							className="text-xs text-muted-foreground hover:text-foreground hover:underline mt-1 inline-block"
 						>
 							View session
@@ -227,16 +227,21 @@ function RunItem({ data }: { data: PendingRunSummary }) {
 				</div>
 			</div>
 
-			{data.session_id && (
-				<div className="mt-3 ml-8">
-					<Link href={`/dashboard/sessions/${data.session_id}`}>
+			<div className="mt-3 ml-8 flex items-center gap-2">
+				<Link href={`/dashboard/automations/runs/${data.id}`}>
+					<Button size="sm" variant="default" className="h-8">
+						<ExternalLink className="h-3.5 w-3.5" />
+						<span className="ml-1.5">Inspect Run</span>
+					</Button>
+				</Link>
+				{data.session_id && (
+					<Link href={`/workspace/${data.session_id}`}>
 						<Button size="sm" variant="outline" className="h-8">
-							<ExternalLink className="h-3.5 w-3.5" />
-							<span className="ml-1.5">View Session</span>
+							<span>Take Over in Studio</span>
 						</Button>
 					</Link>
-				</div>
-			)}
+				)}
+			</div>
 		</div>
 	);
 }
diff --git a/apps/web/src/components/studio/sidebar.tsx b/apps/web/src/components/studio/sidebar.tsx
new file mode 100644
index 0000000..d035f61
--- /dev/null
+++ b/apps/web/src/components/studio/sidebar.tsx
@@ -0,0 +1,144 @@
+"use client";
+
+import { useSessions } from "@/hooks/use-sessions";
+import { cn } from "@/lib/utils";
+import { useDashboardStore } from "@/stores/dashboard";
+import type { Session } from "@proliferate/shared/contracts";
+import { formatDistanceToNow } from "date-fns";
+import { MessageSquare, Plus, Search } from "lucide-react";
+import Link from "next/link";
+import { useParams } from "next/navigation";
+import { useMemo } from "react";
+
+function groupSessionsByDate(sessions: Session[]) {
+	const now = new Date();
+	const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+	const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
+
+	const groups: { label: string; sessions: Session[] }[] = [
+		{ label: "Today", sessions: [] },
+		{ label: "Previous 7 Days", sessions: [] },
+		{ label: "Older", sessions: [] },
+	];
+
+	for (const session of sessions) {
+		const date = new Date(session.lastActivityAt ?? session.startedAt ?? "");
+		if (date >= today) {
+			groups[0].sessions.push(session);
+		} else if (date >= weekAgo) {
+			groups[1].sessions.push(session);
+		} else {
+			groups[2].sessions.push(session);
+		}
+	}
+
+	return groups.filter((g) => g.sessions.length > 0);
+}
+
+export function StudioSidebar() {
+	const params = useParams<{ id: string }>();
+	const activeId = params.id;
+	const { data: sessions, isLoading } = useSessions();
+	const { setCommandSearchOpen } = useDashboardStore();
+
+	const sorted = useMemo(
+		() =>
+			[...(sessions ?? [])].sort((a, b) => {
+				const aDate = a.lastActivityAt ?? a.startedAt ?? "";
+				const bDate = b.lastActivityAt ?? b.startedAt ?? "";
+				return bDate.localeCompare(aDate);
+			}),
+		[sessions],
+	);
+
+	const groups = useMemo(() => groupSessionsByDate(sorted), [sorted]);
+
+	return (
+		<aside className="hidden md:flex w-52 flex-col border-r border-border/50 bg-sidebar shrink-0 h-full">
+			{/* New session + Search */}
+			<div className="p-1.5 space-y-0.5">
+				<Link href="/workspace" className="block">
+					<button
+						type="button"
+						className="w-full flex items-center gap-1.5 px-2 h-7 rounded-md bg-foreground text-background hover:bg-foreground/90 transition-colors text-[12px] font-medium"
+					>
+						<Plus className="h-3 w-3" />
+						New session
+					</button>
+				</Link>
+				<button
+					type="button"
+					className="w-full flex items-center gap-1.5 px-2 h-7 rounded-md text-[12px] text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors"
+					onClick={() => setCommandSearchOpen(true)}
+				>
+					<Search className="h-3 w-3" />
+					Search
+					<kbd className="ml-auto text-[10px] font-mono px-1 py-0.5 rounded border border-border/50 text-muted-foreground/60">
+						⌘K
+					</kbd>
+				</button>
+			</div>
+
+			{/* Session list */}
+			<nav className="flex-1 overflow-y-auto px-1.5 py-0.5">
+				{isLoading ? (
+					<div className="space-y-1 px-1.5 py-1">
+						{[1, 2, 3].map((i) => (
+							<div key={i} className="h-7 rounded-md animate-pulse bg-muted/50" />
+						))}
+					</div>
+				) : groups.length === 0 ? (
+					<div className="flex flex-col items-center justify-center py-8 text-center">
+						<MessageSquare className="h-4 w-4 text-muted-foreground/20 mb-1.5" />
+						<p className="text-[11px] text-muted-foreground/50">No sessions yet</p>
+					</div>
+				) : (
+					groups.map((group) => (
+						<div key={group.label} className="mb-2">
+							<p className="px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium text-muted-foreground/40">
+								{group.label}
+							</p>
+							<div className="space-y-px">
+								{group.sessions.map((session) => {
+									const isActive = session.id === activeId;
+									const timeAgo = session.lastActivityAt
+										? formatDistanceToNow(new Date(session.lastActivityAt), {
+												addSuffix: true,
+											})
+										: null;
+
+									return (
+										<Link
+											key={session.id}
+											href={`/workspace/${session.id}`}
+											className={cn(
+												"flex items-center gap-1.5 px-2 py-1 rounded-md transition-colors group",
+												isActive
+													? "bg-muted/70 text-foreground"
+													: "text-muted-foreground hover:text-foreground hover:bg-muted/40",
+											)}
+										>
+											<div className="flex-1 min-w-0">
+												<p className="text-[12px] truncate leading-tight">
+													{session.title || "Untitled session"}
+												</p>
+												{timeAgo && (
+													<p className="text-[10px] text-muted-foreground/40 truncate leading-tight">
+														{timeAgo}
+													</p>
+												)}
+											</div>
+											{session.status === "running" && (
+												<span className="h-1.5 w-1.5 rounded-full bg-emerald-500 shrink-0" />
+											)}
+										</Link>
+									);
+								})}
+							</div>
+						</div>
+					))
+				)}
+			</nav>
+		</aside>
+	);
+}
diff --git a/apps/web/src/server/routers/automations.ts b/apps/web/src/server/routers/automations.ts
index 402a770..036b814 100644
--- a/apps/web/src/server/routers/automations.ts
+++ b/apps/web/src/server/routers/automations.ts
@@ -6,7 +6,7 @@
 
 import { GATEWAY_URL } from "@/lib/gateway";
 import { ORPCError } from "@orpc/server";
-import { automations, runs, schedules } from "@proliferate/services";
+import { actions, automations, runs, schedules } from "@proliferate/services";
 import {
 	AutomationConnectionSchema,
 	AutomationEventDetailSchema,
@@ -554,6 +554,64 @@ export const automationsRouter = {
 			};
 		}),
 
+	/**
+	 * Get a single run by ID with its action invocation timeline.
+	 */
+	getRun: orgProcedure
+		.input(z.object({ runId: z.string().uuid() }))
+		.handler(async ({ input, context }) => {
+			const run = await runs.findRunWithRelations(input.runId);
+			if (!run || run.organizationId !== context.orgId) {
+				throw new ORPCError("NOT_FOUND", { message: "Run not found" });
+			}
+
+			const invocations = run.sessionId ? await actions.listSessionActions(run.sessionId) : [];
+
+			const parsedContext = run.triggerEvent?.parsedContext as Record<string, unknown> | null;
+
+			return {
+				run: {
+					id: run.id,
+					automation_id: run.automationId,
+					automation_name: run.automation?.name ?? null,
+					status: run.status as AutomationRunStatus,
+					status_reason: run.statusReason,
+					error_message: run.errorMessage,
+					queued_at: run.queuedAt.toISOString(),
+					completed_at: run.completedAt?.toISOString() ?? null,
+					session_id: run.sessionId,
+					trigger_event: run.triggerEvent
+						? {
+								id: run.triggerEvent.id,
+								parsed_context: parsedContext,
+								provider_event_type: run.triggerEvent.providerEventType,
+							}
+						: null,
+					trigger: run.trigger
+						? {
+								id: run.trigger.id,
+								name: run.trigger.name,
+								provider: run.trigger.provider,
+							}
+						: null,
+					enrichment_json: (run.enrichmentJson as Record<string, unknown>) ?? null,
+				},
+				invocations: invocations.map((inv) => ({
+					id: inv.id,
+					integration: inv.integration,
+					action: inv.action,
+					riskLevel: inv.riskLevel,
+					params: inv.params,
+					status: inv.status,
+					deniedReason: inv.deniedReason,
+					error: inv.error,
+					createdAt: inv.createdAt?.toISOString() ?? null,
+					completedAt: inv.completedAt?.toISOString() ?? null,
+					durationMs: inv.durationMs,
+				})),
+			};
+		}),
+
 	/**
 	 * Assign a run to the current user (claim).
 	 */
diff --git a/apps/web/src/server/routers/integrations.ts b/apps/web/src/server/routers/integrations.ts
index 73e4c64..6ffa2ec 100644
--- a/apps/web/src/server/routers/integrations.ts
+++ b/apps/web/src/server/routers/integrations.ts
@@ -1025,6 +1025,87 @@ export const integrationsRouter = {
 				};
 			}
 		}),
+
+	/**
+	 * List actions (tools) exposed by a saved connector.
+	 * Looks up the connector by ID, resolves its secret, connects to the MCP
+	 * server, and returns the discovered tools with risk levels.
+	 * Restricted to admin/owner role.
+	 */
+	listActions: orgProcedure
+		.input(z.object({ connectorId: z.string() }))
+		.output(
+			z.object({
+				tools: z.array(
+					z.object({
+						name: z.string(),
+						description: z.string(),
+						riskLevel: z.enum(["read", "write", "danger"]),
+						params: z.array(
+							z.object({
+								name: z.string(),
+								type: z.enum(["string", "number", "boolean", "object"]),
+								required: z.boolean(),
+								description: z.string(),
+							}),
+						),
+					}),
+				),
+			}),
+		)
+		.handler(async ({ input, context }) => {
+			await requireConnectorAdmin(context.user.id, context.orgId);
+
+			const connector = await connectors.getConnector(input.connectorId, context.orgId);
+			if (!connector) {
+				throw new ORPCError("NOT_FOUND", { message: "Connector not found" });
+			}
+
+			const resolvedSecret = await secrets.resolveSecretValue(
+				context.orgId,
+				connector.auth.secretKey,
+			);
+			if (!resolvedSecret) {
+				throw new ORPCError("NOT_FOUND", {
+					message: `Secret "${connector.auth.secretKey}" not found or could not be decrypted`,
+				});
+			}
+
+			const result = await actions.connectors.listConnectorToolsOrThrow(connector, resolvedSecret);
+
+			const { zodToJsonSchema } = await import("@proliferate/providers/helpers/schema");
+			const tools = result.actions.map((a) => {
+				const schema = zodToJsonSchema(a.params);
+				const properties = (schema.properties ?? {}) as Record<string, Record<string, unknown>>;
+				const requiredSet = new Set(
+					Array.isArray(schema.required) ? (schema.required as string[]) : [],
+				);
+				return {
+					name: a.id,
+					description: a.description,
+					riskLevel: a.riskLevel,
+					params: Object.entries(properties).map(([name, prop]) => {
+						const t = prop.type as string;
+						const type: "string" | "number" | "boolean" | "object" =
+							t === "string"
+								? "string"
+								: t === "number"
+									? "number"
+									: t === "boolean"
+										? "boolean"
+										: "object";
+						return {
+							name,
+							type,
+							required: requiredSet.has(name),
+							description: (prop.description as string) ?? "",
+						};
+					}),
+				};
+			});
+
+			return { tools };
+		}),
 };
 
 // ============================================
diff --git a/apps/web/src/server/routers/sessions-create.ts b/apps/web/src/server/routers/sessions-create.ts
index 9310569..123d78a 100644
--- a/apps/web/src/server/routers/sessions-create.ts
+++ b/apps/web/src/server/routers/sessions-create.ts
@@ -84,8 +84,11 @@ async function createScratchSession(input: {
 	const doUrl = getSessionGatewayUrl(sessionId);
 	reqLog.info({ sessionType }, "Creating scratch session");
 
+	// Re-check billing right before insert (race protection)
+	await billing.assertBillingGateForOrg(orgId, "session_start");
+
 	try {
-		await createSessionWithAdmission(orgId, {
+		await sessions.createSessionRecord({
 			id: sessionId,
 			prebuildId: null,
 			organizationId: orgId,
@@ -180,10 +183,13 @@ async function createPrebuildSession(input: {
 	const doUrl = getSessionGatewayUrl(sessionId);
 	reqLog.info("Session creation started");
 
+	// Re-check billing right before insert (race protection)
+	await billing.assertBillingGateForOrg(orgId, "session_start");
+
 	// Create session record and return immediately.
 	// Sandbox provisioning is handled by the gateway when the client connects.
 	try {
-		await createSessionWithAdmission(orgId, {
+		await sessions.createSessionRecord({
 			id: sessionId,
 			prebuildId,
 			organizationId: orgId,
@@ -211,27 +217,3 @@ async function createPrebuildSession(input: {
 		warning: null,
 	};
 }
-
-/**
- * Create a session with atomic concurrent admission guard when billing is enabled.
- * Falls back to plain insert when billing is disabled.
- */
-async function createSessionWithAdmission(
-	orgId: string,
-	input: sessions.DbCreateSessionInput,
-): Promise<void> {
-	const planLimits = await billing.getOrgPlanLimits(orgId);
-	if (planLimits) {
-		const { created } = await sessions.createWithAdmissionGuard(
-			input,
-			planLimits.maxConcurrentSessions,
-		);
-		if (!created) {
-			throw new ORPCError("FORBIDDEN", {
-				message: `Concurrent session limit reached. Your plan allows ${planLimits.maxConcurrentSessions} concurrent session${planLimits.maxConcurrentSessions === 1 ? "" : "s"}.`,
-			});
-		}
-	} else {
-		await sessions.createSessionRecord(input);
-	}
-}
diff --git a/apps/web/src/server/routers/sessions-pause.ts b/apps/web/src/server/routers/sessions-pause.ts
index 81c3af4..18882ce 100644
--- a/apps/web/src/server/routers/sessions-pause.ts
+++ b/apps/web/src/server/routers/sessions-pause.ts
@@ -55,11 +55,7 @@ export async function pauseSessionHandler(
 	const plan: BillingPlan = org?.billingPlan === "pro" ? "pro" : "dev";
 	const provider = getSandboxProvider(session.sandboxProvider as SandboxProviderType);
 
-	const capacity = await billing.ensureSnapshotCapacity(
-		orgId,
-		plan,
-		billing.deleteSnapshotFromProvider,
-	);
+	const capacity = await billing.ensureSnapshotCapacity(orgId, plan);
 
 	let snapshotId: string | null = null;
 
diff --git a/apps/web/src/server/routers/sessions-snapshot.ts b/apps/web/src/server/routers/sessions-snapshot.ts
index b474f89..e19fff2 100644
--- a/apps/web/src/server/routers/sessions-snapshot.ts
+++ b/apps/web/src/server/routers/sessions-snapshot.ts
@@ -44,11 +44,7 @@ export async function snapshotSessionHandler(
 	const org = await orgs.getBillingInfoV2(orgId);
 	const plan: BillingPlan = org?.billingPlan === "pro" ? "pro" : "dev";
 
-	const capacity = await billing.ensureSnapshotCapacity(
-		orgId,
-		plan,
-		billing.deleteSnapshotFromProvider,
-	);
+	const capacity = await billing.ensureSnapshotCapacity(orgId, plan);
 	if (!capacity.allowed) {
 		throw new ORPCError("CONFLICT", {
 			message: "Snapshot quota exceeded. Delete an existing snapshot and try again.",
diff --git a/apps/worker/src/billing/worker.ts b/apps/worker/src/billing/worker.ts
index b977046..aeb54b3 100644
--- a/apps/worker/src/billing/worker.ts
+++ b/apps/worker/src/billing/worker.ts
@@ -25,8 +25,6 @@ import {
 	createBillingOutboxWorker,
 	createBillingReconcileQueue,
 	createBillingReconcileWorker,
-	createBillingSnapshotCleanupQueue,
-	createBillingSnapshotCleanupWorker,
 	getConnectionOptions,
 } from "@proliferate/queue";
 import { processGraceJob } from "../jobs/billing/grace.job";
@@ -35,7 +33,6 @@ import { processLLMSyncOrgJob } from "../jobs/billing/llm-sync-org.job";
 import { processMeteringJob } from "../jobs/billing/metering.job";
 import { processOutboxJob } from "../jobs/billing/outbox.job";
 import { processReconcileJob } from "../jobs/billing/reconcile.job";
-import { processSnapshotCleanupJob } from "../jobs/billing/snapshot-cleanup.job";
 
 // ============================================
 // Billing Worker State
@@ -73,7 +70,6 @@ export async function startBillingWorker(logger: Logger): Promise<void> {
 	const reconcileQueue = createBillingReconcileQueue(connection);
 	const llmSyncDispatchQueue = createBillingLLMSyncDispatchQueue(connection);
 	const llmSyncOrgQueue = createBillingLLMSyncOrgQueue(connection);
-	const snapshotCleanupQueue = createBillingSnapshotCleanupQueue(connection);
 
 	// Add repeatable schedules (idempotent — BullMQ deduplicates by repeat key)
 	await meteringQueue.add(
@@ -116,14 +112,6 @@ export async function startBillingWorker(logger: Logger): Promise<void> {
 		},
 	);
 
-	await snapshotCleanupQueue.add(
-		"snapshot-cleanup",
-		{},
-		{
-			repeat: { pattern: "0 1 * * *", tz: "UTC" }, // Daily at 01:00 UTC
-		},
-	);
-
 	// Create workers
 	const meteringWorker = createBillingMeteringWorker(
 		async (job) => processMeteringJob(job, logger),
@@ -155,11 +143,6 @@ export async function startBillingWorker(logger: Logger): Promise<void> {
 		connection,
 	);
 
-	const snapshotCleanupWorker = createBillingSnapshotCleanupWorker(
-		async (job) => processSnapshotCleanupJob(job, logger),
-		connection,
-	);
-
 	// Attach error handlers
 	const workers = [
 		meteringWorker,
@@ -168,7 +151,6 @@ export async function startBillingWorker(logger: Logger): Promise<void> {
 		reconcileWorker,
 		llmSyncDispatchWorker,
 		llmSyncOrgWorker,
-		snapshotCleanupWorker,
 	];
 	for (const worker of workers) {
 		worker.on("failed", (job, err) => {
@@ -185,7 +167,6 @@ export async function startBillingWorker(logger: Logger): Promise<void> {
 		reconcileQueue,
 		llmSyncDispatchQueue,
 		llmSyncOrgQueue,
-		snapshotCleanupQueue,
 	];
 
 	isRunning = true;
@@ -199,7 +180,6 @@ export async function startBillingWorker(logger: Logger): Promise<void> {
 				"billing-reconcile (daily 00:00 UTC)",
 				"billing-llm-sync-dispatch (30s)",
 				"billing-llm-sync-org (on-demand)",
-				"billing-snapshot-cleanup (daily 01:00 UTC)",
 			],
 		},
 		"Billing BullMQ workers started",
diff --git a/apps/worker/src/jobs/billing/grace.job.ts b/apps/worker/src/jobs/billing/grace.job.ts
index cd59911..e62cefa 100644
--- a/apps/worker/src/jobs/billing/grace.job.ts
+++ b/apps/worker/src/jobs/billing/grace.job.ts
@@ -8,6 +8,7 @@ import type { Logger } from "@proliferate/logger";
 import type { Job } from "@proliferate/queue";
 import type { BillingGraceJob } from "@proliferate/queue";
 import { billing, orgs } from "@proliferate/services";
+import { getProvidersMap } from "./providers";
 
 export async function processGraceJob(_job: Job<BillingGraceJob>, logger: Logger): Promise<void> {
 	const graceLog = logger.child({ op: "grace" });
@@ -16,10 +17,11 @@ export async function processGraceJob(_job: Job<BillingGraceJob>, logger: Logger
 		const expiredOrgs = await orgs.listGraceExpiredOrgs();
 		if (!expiredOrgs.length) return;
 
+		const providers = await getProvidersMap();
 		for (const org of expiredOrgs) {
 			try {
 				await orgs.expireGraceForOrg(org.id);
-				await billing.enforceCreditsExhausted(org.id);
+				await billing.handleCreditsExhaustedV2(org.id, providers);
 				graceLog.info({ orgId: org.id }, "Grace expired -> exhausted");
 			} catch (err) {
 				graceLog.error({ err, orgId: org.id }, "Failed to expire grace for org");
diff --git a/apps/worker/src/jobs/billing/llm-sync-org.job.ts b/apps/worker/src/jobs/billing/llm-sync-org.job.ts
index b0501c0..013d95b 100644
--- a/apps/worker/src/jobs/billing/llm-sync-org.job.ts
+++ b/apps/worker/src/jobs/billing/llm-sync-org.job.ts
@@ -13,6 +13,7 @@ import type { Logger } from "@proliferate/logger";
 import type { BillingLLMSyncOrgJob, Job } from "@proliferate/queue";
 import { billing } from "@proliferate/services";
 import { calculateLLMCredits } from "@proliferate/shared/billing";
+import { getProvidersMap } from "./providers";
 
 /** Default lookback window for first-run orgs with no cursor (5 minutes). */
 const LLM_SYNC_DEFAULT_LOOKBACK_MS = 5 * 60 * 1000;
@@ -110,9 +111,10 @@ export async function processLLMSyncOrgJob(
 
 		log.info(
 			{ enforcementReason: result.enforcementReason },
-			"Balance exhausted — pausing sessions",
+			"Balance exhausted — terminating sessions",
 		);
-		await billing.enforceCreditsExhausted(orgId);
+		const providers = await getProvidersMap();
+		await billing.handleCreditsExhaustedV2(orgId, providers);
 	} else if (result.shouldBlockNewSessions) {
 		log.info({ enforcementReason: result.enforcementReason }, "Entering grace period");
 	}
diff --git a/apps/worker/src/jobs/billing/outbox.job.ts b/apps/worker/src/jobs/billing/outbox.job.ts
index eba2c56..ce817a0 100644
--- a/apps/worker/src/jobs/billing/outbox.job.ts
+++ b/apps/worker/src/jobs/billing/outbox.job.ts
@@ -8,10 +8,12 @@ import type { Logger } from "@proliferate/logger";
 import type { Job } from "@proliferate/queue";
 import type { BillingOutboxJob } from "@proliferate/queue";
 import { billing } from "@proliferate/services";
+import { getProvidersMap } from "./providers";
 
 export async function processOutboxJob(_job: Job<BillingOutboxJob>, logger: Logger): Promise<void> {
 	try {
-		await billing.processOutbox();
+		const providers = await getProvidersMap();
+		await billing.processOutbox(providers);
 	} catch (err) {
 		logger.error({ err }, "Outbox processing error");
 		throw err;
diff --git a/apps/worker/src/jobs/billing/reconcile.job.ts b/apps/worker/src/jobs/billing/reconcile.job.ts
index 521c90d..f00ed36 100644
--- a/apps/worker/src/jobs/billing/reconcile.job.ts
+++ b/apps/worker/src/jobs/billing/reconcile.job.ts
@@ -2,14 +2,18 @@
  * BullMQ processor: nightly shadow balance reconciliation.
  *
  * Runs daily at 00:00 UTC. Reconciles local shadow balances with Autumn.
- * Per-org errors are isolated — one failure does not abort the entire run.
  */
 
 import type { Logger } from "@proliferate/logger";
 import type { Job } from "@proliferate/queue";
 import type { BillingReconcileJob } from "@proliferate/queue";
 import { billing } from "@proliferate/services";
-import { AUTUMN_FEATURES, METERING_CONFIG, autumnGetBalance } from "@proliferate/shared/billing";
+import { AUTUMN_FEATURES, autumnGetBalance } from "@proliferate/shared/billing";
+
+// TODO: wire up from feat/billing-data-layer-rest-bulk after merge
+async function listOrgsForReconciliation(): Promise<{ id: string; autumnCustomerId: string }[]> {
+	return [];
+}
 
 export async function processReconcileJob(
 	_job: Job<BillingReconcileJob>,
@@ -18,7 +22,7 @@ export async function processReconcileJob(
 	const reconcileLog = logger.child({ op: "reconcile" });
 
 	try {
-		const orgsToReconcile = await billing.listBillableOrgsWithCustomerId();
+		const orgsToReconcile = await listOrgsForReconciliation();
 		if (!orgsToReconcile.length) {
 			reconcileLog.debug("No orgs to reconcile");
 			return;
@@ -26,62 +30,25 @@ export async function processReconcileJob(
 
 		reconcileLog.info({ orgCount: orgsToReconcile.length }, "Starting nightly reconciliation");
 
-		let reconciled = 0;
-		let failed = 0;
-		let driftAlerts = 0;
-
 		for (const org of orgsToReconcile) {
 			try {
 				const { balance: actualBalance } = await autumnGetBalance(
 					org.autumnCustomerId,
 					AUTUMN_FEATURES.credits,
 				);
-				const result = await billing.reconcileShadowBalance(
+				await billing.reconcileShadowBalance(
 					org.id,
 					actualBalance,
 					"shadow_sync",
 					"Nightly reconciliation",
 				);
-
-				reconciled++;
-
-				// Drift detection: alert if absolute drift exceeds threshold
-				const absDrift = Math.abs(result.delta);
-				if (absDrift > METERING_CONFIG.reconcileDriftAlertThreshold) {
-					driftAlerts++;
-					reconcileLog.error(
-						{
-							orgId: org.id,
-							drift: result.delta,
-							previousBalance: result.previousBalance,
-							newBalance: result.newBalance,
-							alert: true,
-						},
-						"Reconciliation drift exceeds threshold",
-					);
-				} else if (result.delta !== 0) {
-					reconcileLog.info(
-						{
-							orgId: org.id,
-							drift: result.delta,
-							previousBalance: result.previousBalance,
-							newBalance: result.newBalance,
-						},
-						"Reconciled org with drift",
-					);
-				} else {
-					reconcileLog.debug({ orgId: org.id, actualBalance }, "Reconciled org (no drift)");
-				}
+				reconcileLog.debug({ orgId: org.id, actualBalance }, "Reconciled org");
 			} catch (err) {
-				failed++;
 				reconcileLog.error({ err, orgId: org.id }, "Failed to reconcile org");
 			}
 		}
 
-		reconcileLog.info(
-			{ orgCount: orgsToReconcile.length, reconciled, failed, driftAlerts },
-			"Nightly reconciliation complete",
-		);
+		reconcileLog.info({ orgCount: orgsToReconcile.length }, "Nightly reconciliation complete");
 	} catch (err) {
 		reconcileLog.error({ err }, "Reconciliation job failed");
 		throw err;
diff --git a/apps/worker/src/jobs/billing/snapshot-cleanup.job.ts b/apps/worker/src/jobs/billing/snapshot-cleanup.job.ts
deleted file mode 100644
index fa91a71..0000000
--- a/apps/worker/src/jobs/billing/snapshot-cleanup.job.ts
+++ /dev/null
@@ -1,25 +0,0 @@
-/**
- * BullMQ processor: snapshot retention cleanup.
- *
- * Runs daily at 01:00 UTC. Evicts expired snapshots across all orgs
- * using the global SNAPSHOT_RETENTION_DAYS cap.
- */
-
-import type { Logger } from "@proliferate/logger";
-import type { BillingSnapshotCleanupJob, Job } from "@proliferate/queue";
-import { billing } from "@proliferate/services";
-
-export async function processSnapshotCleanupJob(
-	_job: Job<BillingSnapshotCleanupJob>,
-	logger: Logger,
-): Promise<void> {
-	try {
-		const { deletedCount } = await billing.cleanupAllExpiredSnapshots();
-		if (deletedCount > 0) {
-			logger.info({ deletedCount }, "Snapshot cleanup complete");
-		}
-	} catch (err) {
-		logger.error({ err }, "Snapshot cleanup error");
-		throw err;
-	}
-}
diff --git a/docs/specs/ui-redesign.md b/docs/specs/ui-redesign.md
new file mode 100644
index 0000000..19f42a3
--- /dev/null
+++ b/docs/specs/ui-redesign.md
@@ -0,0 +1,479 @@
+# UI Redesign — Canonical Spec
+
+> Single source of truth for the Proliferate UI redesign. Every frontend decision lives here.
+> This document is prescriptive, not descriptive — it defines what we are building, not what exists today.
+
+---
+
+## 1. Design System & Aesthetic
+
+The aesthetic target is **Raycast / Linear / Vercel**.
+
+* **Colors:** Neutral, monochromatic palettes. Grays, off-blacks, and stark whites. Minimal accent colors used strictly for semantic states (e.g., Red for errors/deny, Yellow for warnings/drift, Blue for primary focus).
+* **Typography:** High-contrast, highly legible. Heavy use of monospaced fonts (`ui-monospace`, `SF Mono`, `JetBrains Mono`) for technical data (hashes, IDs, file paths, parameters).
+* **Motion:** Swift, eased, and intentional. **No pulsing, no glowing, no neon gradients, no 3D.** Use Framer Motion for structural layout transitions, but keep durations fast (`< 200ms`). Magic comes from speed and precision.
+* **Navigation:** Keyboard-first (`Cmd+K`).
+
+---
+
+## 2. Two-World Architecture
+
+The application has two distinct UI paradigms. They share auth and global state but have completely separate layouts, navigation, and mental models.
+
+### World 1: The Studio (`/workspace`)
+
+The "doing" world. Full-bleed IDE layout. No SaaS sidebar. The user is here to write code, talk to agents, and watch things happen in real time.
+
+* **Layout:** Full-screen. Left sidebar = chat history only. Right = Developer Panel (Terminal, Changes, Preview, Artifacts). Bottom = chat input.
+* **Navigation:** Minimal. A persistent top bar with a crisp `[ Inbox ]` badge is the only escape hatch to the Command Center.
+* **Mental model:** "I am in the cockpit."
+
+### World 2: The Command Center (`/dashboard`)
+
+The "managing" world. Standard SaaS sidebar layout. The user is here to configure, approve, delegate, and monitor.
+
+* **Layout:** Fixed sidebar on left. Content area on right. Standard vertical scroll.
+* **Navigation:** Sidebar with sections for Inbox, Automations, Integrations, Repositories.
+* **Mental model:** "I am in mission control."
+
+### The Bridge Between Worlds
+
+Users move between worlds via:
+
+1. **Inbox indicator** — A static, high-contrast `[ 1 ] Inbox` badge in the Studio's top bar (solid dot or pill). When items arrive, it appears with a swift, crisp slide-in animation. Clicking it navigates to `/dashboard/inbox`.
+2. **Audit Trail → Take Over** — Clicking a paused run in the dashboard opens an Audit Trail of the agent's actions. Clicking `[ Take Over in Studio ]` triggers a seamless layout transition to the Studio (`/workspace/:id`).
+3. **Standard navigation** — Cmd+K palette, subtle back buttons.
+
+---
+
+## 3. Route Map
+
+The architecture **must** use Next.js Route Groups to physically isolate the layouts.
+
+### Public / Auth
+
+| Route | Description |
+| --- | --- |
+| `/` | Landing page |
+| `/sign-in`, `/sign-up` | Auth flows |
+| `/auth/*` | Callbacks |
+| `/invite/:id` | Accept org invitation |
+
+### Onboarding
+
+| Route | Description |
+| --- | --- |
+| `/onboarding` | Wizard (developer or organization flow) |
+| `/onboarding/complete` | Post-Stripe-checkout landing |
+
+### World 1: The Studio (Route Group: `(studio)`)
+
+| Route | Description |
+| --- | --- |
+| `/workspace` | New session. Raycast-style centered command palette empty state. |
+| `/workspace/demo` | Post-onboarding "Flight Simulator" demo chat. Pre-warmed snapshot. |
+| `/workspace/:id` | Active or past chat session. Left sidebar = chat history only. |
+
+### World 2: The Command Center (Route Group: `(command-center)`)
+
+| Route | Description |
+| --- | --- |
+| `/dashboard` | Always redirects to `/dashboard/inbox`. |
+| `/dashboard/inbox` | Approvals and failed runs. The hero feature. |
+| `/dashboard/automations` | Automation list + recipe cards. |
+| `/dashboard/automations/:id` | Automation detail / builder. |
+| `/dashboard/automations/runs/:runId` | **Run Audit View:** Timeline of actions taken, leading to approval/take-over. |
+| `/dashboard/repositories` | Repo list, add repos, configure environments. |
+| `/dashboard/repositories/:id` | Repo detail (snapshots, service commands, secret files). |
+| `/dashboard/integrations` | Unified Integrations hub (OAuth + MCP). |
+| `/dashboard/integrations/:id` | Enterprise Access Control Matrix. |
+
+### Settings (Route Group: `(settings)`)
+
+| Route | Description |
+| --- | --- |
+| `/settings` | Redirects to `/settings/profile`. |
+| `/settings/profile`, `/settings/general`, `/settings/members` | Standard settings. |
+| `/settings/billing` | Billing & usage. **Admin only.** |
+
+*(`/settings/tools` and `/settings/secrets` removed. Tools live in Integrations; Secrets live in Repositories.)*
+
+### Route Group Directory Tree
+
+```
+src/app/
+├── (auth)/                         # Auth pages (sign-in, sign-up, verify, invite)
+│    ├── sign-in/page.tsx
+│    ├── sign-up/page.tsx
+│    ├── auth/...
+│    └── invite/[id]/page.tsx
+├── (studio)/                       # World 1: Full-bleed IDE layout
+│    ├── layout.tsx                  # IDE shell: chat history sidebar, top bar with Inbox indicator
+│    └── workspace/
+│         ├── page.tsx               # Raycast command palette empty state
+│         ├── demo/page.tsx          # Flight Simulator
+│         └── [id]/page.tsx          # Active/past session
+├── (command-center)/               # World 2: SaaS sidebar layout
+│    ├── layout.tsx                  # Fixed sidebar: Inbox, Repos, Automations, Integrations
+│    └── dashboard/
+│         ├── page.tsx               # Redirect to /dashboard/inbox
+│         ├── inbox/page.tsx
+│         ├── automations/...
+│         ├── repositories/...
+│         └── integrations/...
+├── (settings)/                     # Settings: own sidebar layout
+│    ├── layout.tsx                  # Back button, nav, org switcher
+│    └── settings/...
+├── onboarding/                     # Onboarding wizard (standalone layout)
+│    ├── layout.tsx
+│    ├── page.tsx
+│    └── complete/page.tsx
+└── layout.tsx                      # Root: providers, fonts, global styles only
+```
+
+Key rules:
+- `(studio)/layout.tsx` and `(command-center)/layout.tsx` share zero UI components. They are completely independent React trees below the root.
+- Global state (Zustand stores, WebSocket listeners) lives above both layouts in the root `layout.tsx` providers. This is how the Inbox indicator in the Studio knows about events happening in the Command Center's domain.
+- The root `layout.tsx` contains only: `<html>`, `<body>`, theme provider, auth provider, query client provider, Zustand hydration, global WebSocket listener. No visual chrome.
+
+---
+
+## 4. Permissions, Actions & Integrations
+
+The platform balances "Magical End-User Experience" with "Enterprise-Grade Admin Security."
+
+### For the End-User ("Magical Capabilities")
+
+* To a standard developer, Integrations and Actions should just feel like "Capabilities" or "Skills" they are giving their agent.
+* They go to `/dashboard/integrations` (if permitted) or the Automation Builder, see a clean grid of tools, and can easily connect their personal accounts (e.g., authenticating their own GitHub account so the agent's PRs have their name on them).
+* It feels frictionless. If they ask the agent to do something, and they lack the capability, the agent just says: *"I can do that! I just need you to authenticate with Linear first: `[ Connect Linear ]`"*.
+
+### For the Admin ("Enterprise Control")
+
+* To an Admin, adding an MCP Connector or configuring an Org-wide OAuth app should feel like rigorous enterprise IT.
+* Admins see the **Security Policies (Action Modes)** matrix. A data-dense, tabular view of every action an integration exposes (`sentry.update_issue`, `github.create_pull_request`).
+* Next to each action is a segmented control: `[ Allow | Require Approval | Deny ]` (writes to `organizations.action_modes`).
+* **Drift Detection:** If an underlying MCP tool schema changes, the UI explicitly flags the row with a yellow warning icon: *"Schema changed. Review required."* forcing the admin to re-verify the tool.
+
+### Role Permissions Matrix
+
+| Feature | Admin / Owner | Member |
+| --- | --- | --- |
+| Automations | Full access | Full access |
+| Integrations (Platform) | **Connect new tools, set Org-wide Action Permission matrix.** | View available capabilities. Connect user-scoped OAuth (e.g. personal GitHub). |
+| Repo Management | Add/Remove repos. | Read-only (use repos in sessions). |
+| Secret Files | Full CRUD (Write-Only UI). | **Invisible.** |
+| Billing | Full access. | Invisible. |
+
+---
+
+## 5. Onboarding & The "Flight Simulator" Mission
+
+Do not block developers with a paywall upfront. Ask for their preferred tools (GitHub, Sentry, Linear), then drop them into `/workspace/demo` (a pre-warmed Next.js environment owned by us).
+
+### Developer Flow (4 steps)
+
+1. **Path choice** — "Developer" or "Company" cards.
+2. **Tool selection** — Multi-select cards for all supported integrations.
+3. **Billing / Start free trial** — Required step. Moves org out of `"unconfigured"` billing state. Copy must emphasize no charge during trial.
+4. **Complete** — Drop directly into `/workspace/demo`. NOT the dashboard.
+
+Auto-create organization for developer flow. No org creation step.
+
+### Organization Flow (7 steps)
+
+1. **Path choice** — Same as developer.
+2. **Create organization** — Name only. Auto-generates slug.
+3. **Questionnaire** — Where did you hear about us? Company website. Team size.
+4. **Tool selection** — Same multi-select as developer flow.
+5. **Invite members** — Email + role picker. "Skip for now" option.
+6. **Billing / Start free trial** — Same as developer flow.
+7. **Complete** — Drop directly into `/workspace/demo`. NOT the dashboard.
+
+### The Flight Simulator Demo
+
+Both flows end at `/workspace/demo`. Loads a **Globally Cached Demo Configuration** — a pre-warmed snapshot of a simple Next.js + Tailwind app (owned by Proliferate) with a known visual bug.
+
+1. **Grok Environments:** Chat opens, boots in < 1s. Crisp toast: *"Environment restored from memory snapshot in 0.8s."*
+2. **Grok Chats:** Agent says: *"I see a broken layout. Tell me to fix it."* User types "fix". Code diffs stream into the right panel.
+3. **Grok Permissions:** Agent says: *"I'd open a PR, but I need your approval for write actions."* A crisp, inline card appears. User clicks `[ Approve & Always Allow ]`.
+4. **Grok Automations:** Agent says: *"I've set up a background automation. Check your Dashboard."* User clicks to Dashboard, sees the Inbox.
+
+### Billing Wall Strategy (Future)
+
+When user tries to connect *their own* GitHub repo (`/dashboard/repositories/new`), trigger the 14-day trial Stripe modal. They are paying to unlock their code, not access a generic SaaS wrapper.
+
+### Invited Users
+
+1. If not authenticated, redirect to sign-in/sign-up with return URL.
+2. Accept invitation page shows org name, "Welcome to [orgname]" heading, Accept/Decline buttons, expiration date.
+3. Upon accepting, redirect to onboarding.
+
+---
+
+## 6. The Studio — Detail (`/workspace`)
+
+### Empty State (`/workspace`)
+
+* **Centered Command Palette:** Raycast-style search bar dead center. Crisp, light gray background (or pure dark mode), subtle noise texture, no gradients.
+* **Context Pills:** Directly above the input, minimal 1px bordered pills: `[ Select Repository ]` and `[ 4 Capabilities Active ]`.
+* **Framer FLIP Animation:** On `Enter`, the center search bar physically shrinks and snaps to the bottom of the screen (using `layoutId`), while the chat history and right panel snap into place.
+
+### Active Session (`/workspace/:id`)
+
+* **Left Sidebar:** Chat history only (Today, Previous 7 Days, grouped or chronological, with organize/sort/filter).
+* **Main Area:** Chat thread with assistant-ui.
+* **Right Panel:** Developer Panel (see §6.1 below).
+* **Agent Status Badge:** Dynamic, monospace lifecycle status above chat input: `>_ Analyzing codebase...` → `>_ Running git grep...` → `[!] Waiting for approval`.
+* **Session Header:** Minimal. Session title + environment dropdown + Settings gear dropdown on the far right.
+
+### Session Loading
+
+Fast. If from a pre-warmed snapshot, < 1 second. Show a sleek toast with timing data, not a generic spinner.
+
+### 6.1 Developer Panel (Right Panel)
+
+The Developer Panel is the developer's toolbox inside a session. It is the core "IDE feel" of the Studio. Beauty comes from **information density, rigorous sub-pixel alignment, stark contrast, and hairline borders.** It should feel like a machined piece of aluminum.
+
+#### Container
+
+* **The Split:** The screen is cleanly divided by a single, crisp 1px vertical border (`border-zinc-200` light / `border-zinc-800` dark). No drop shadows between chat and panel.
+* **Drag Handle:** The vertical border is draggable. On hover: cursor changes to `col-resize`, a subtle `2px` vertical accent line appears instantly. Double-click snaps to 50% width.
+* **Background Contrast:** If the Chat area is the absolute background color (`#FFFFFF` / `#000000`), the Developer Panel background is elevated one microscopic step (`bg-zinc-50` / `bg-[#0A0A0A]`). This creates a "sunken canvas" effect — the left side is conversation, the right side is the machine.
+
+#### Tab Bar (Header)
+
+A strict, flush tab bar anchored to the absolute top of the panel. Kill the floating ghost buttons.
+
+```
+Terminal    Changes [3]    Preview    Artifacts            [gear] [x]
+----------------------------------------------------------------------
+```
+
+* **Typography:** `text-[12px] font-medium tracking-wide`. Geist or Inter.
+* **Active State:** No pill backgrounds. Active tab = high-contrast text (`text-foreground`) + crisp `2px` bottom border flush with header's bottom border. Inactive tabs = `text-zinc-500`.
+* **Live Badges:** Monospaced count directly in the tab: `Changes [3]`. No pulsing dots.
+* **Settings/Environment controls:** Collapsed into a single gear dropdown icon on the far right, keeping tabs focused on output. Contains: session info, snapshot controls, auto-start config, theme toggle.
+
+#### Tab: Terminal
+
+Developers judge tools by their terminal. It must look like a raw PTY interface.
+
+* **Canvas:** Force background to `#000000`, even in Light Mode. Anchors the screen visually.
+* **Typography:** `JetBrains Mono`, `Geist Mono`, or `SF Mono`. 12px. Line height 1.5.
+* **Color Palette:** Override default xterm.js colors with a muted, pastel syntax theme (e.g., Tokyo Night). Soft emeralds for success, muted blues for info, stark rose for errors.
+* **Auto-Scroll:** Smoothly auto-scrolls to bottom as agent streams stdout. If user scrolls up even 1px, auto-scroll suspends and a floating transparent `[ Jump to bottom ]` pill appears.
+* **Connection:** WebSocket to `/proxy/:sessionId/:token/devtools/terminal`. Handles string, ArrayBuffer, Blob messages. Sends resize events on container resize via ResizeObserver.
+* **Services Strip:** Collapsible horizontal bar above terminal, visible only when services are running. Shows: chevron toggle, "Services" label, count badge, exposed port. Expands to service list with status dots, commands, stop/restart buttons, SSE log streaming.
+
+#### Tab: Changes (Code/Diff Viewer)
+
+Where the user verifies what the AI did. Must rival GitHub's PR viewer, but cleaner.
+
+* **File Tree (Top):** Dense, un-padded file list (`h-8` per row). Directory path dimmed, filename highlighted: `<span class="text-zinc-500">src/components/</span><span class="text-foreground">button.tsx</span>`. Status indicators: rigid right-hand column of monospace colored letters — `A` (green), `M` (yellow), `D` (red).
+* **Diff View (Bottom):** Immaculate unified diff. Extremely washed-out transparent backgrounds (`bg-green-500/10`, `bg-red-500/10`) with a bright solid `2px` left-edge border per changed line. Hunk headers (`@@ -12,4 +12,5 @@`) get subtle blue tint and 1px top/bottom border separators.
+* **Git Operations:** Branch name + detached indicator, create-branch form, ahead/behind counts, commit form (message input + "Include untracked" checkbox), push button with warning text, create-PR form. Stacked vertical sections with uppercase tracking-wider labels.
+* **Multi-repo:** Dropdown selector when multiple git repos exist.
+* **Polling:** Git status every 5s. Activity ticks (agent file modifications) trigger 500ms-debounced query invalidations.
+
+#### Tab: Preview (Mini-Browser)
+
+Live web iframe when agent spins up a dev server.
+
+* **Browser Chrome:** Minimalist chrome at top (`h-10 border-b border-border bg-muted/30`). Centered, muted pill with the local proxy URL in monospace font (read-only, click-to-copy). Three crisp 1px-stroke controls on left: `[ ← ]` `[ → ]` `[ ↻ ]`. Small `[ ↗ ]` icon on far right to open in external tab.
+* **Polling:** Polls URL up to 5 times at 3s intervals. Falls back to CORS-then-no-cors detection.
+* **Fullscreen:** `fixed inset-0 z-50`.
+* **Empty state:** "No Preview Available — Start a dev server to see your app here."
+
+#### Tab: Artifacts (Output Grid)
+
+Generated files — PDFs, CSVs, PNGs, verification screenshots.
+
+* **Layout:** Strict CSS Grid.
+* **Cards:** Flat, `1px` borders. `rounded-md`. Wireframe file-type icon top-left. File size (`1.2 MB`) and extension (`.tsx`, `.png`) in tiny monospace at bottom.
+* **Hover State:** Border shifts from `border-zinc-800` to `border-zinc-500`, tiny `[ ↓ ]` download icon appears top-right. Instant snap-state, no fades.
+* **Actions:** Approve/deny buttons and "Approve with Grant" option (scope: session/org, max calls). Admin only.
+
+#### Micro-Interactions
+
+1. **Zero Layout Shift:** Switching tabs never resizes the container. Fixed box (`h-[calc(100vh-topbar)]`). Only interior content uses `overflow-y-auto`.
+2. **Custom Scrollbars:** `w-[6px]`, transparent track, `bg-zinc-500/20` thumb that only appears when panel is hovered.
+3. **Loading States:** No spinners for data loading — use fast left-to-right shimmer skeletons mimicking code line shapes. Terse monospace status line (`Connecting...`) for terminal/VS Code connection states.
+4. **Focus Rings:** Stark 1px `ring-zinc-400` outline with `ring-offset-0`. No fuzzy browser glow.
+
+#### Mobile Behavior
+
+On mobile, only one view is visible at a time — chat or panel, never side-by-side. A toggle button in the header switches between them (`mobileView: "chat" | "preview"`). Panel's close button sets `mobileView` back to "chat".
+
+#### Modal Mode
+
+`CodingSession` can render inside a dialog (`asModal`). Layout lives in `max-w-4xl h-[85vh]` dialog content container. Same internal layout rules apply.
+
+#### Data Flow
+
+Panels that need sandbox access (Terminal, Changes, Artifacts) authenticate via a WebSocket token from `useWsToken()` and hit the gateway's proxy endpoints at `/proxy/:sessionId/:token/devtools/...`. Git operations go through WebSocket messages to the session hub — not HTTP. Activity ticks (emitted when the agent modifies files) trigger 500ms-debounced query invalidations so Changes and Artifacts stay current without manual refresh.
+
+---
+
+## 7. The Command Center — Detail (`/dashboard`)
+
+### Dashboard Home
+
+`/dashboard` always redirects to `/dashboard/inbox`. No conditional logic. No prompt input on the dashboard. Session creation happens exclusively in `/workspace`.
+
+### `/dashboard/inbox` & Run Audit View (The Hero Feature)
+
+**Empty state:**
+
+* A crisp, monochrome, static illustration of an organized desk or empty tray.
+* Copy: "Inbox Zero. Your agents are working quietly. Approvals and paused runs will appear here."
+
+**With items:**
+
+* Each item shows: automation name, action requested, agent status.
+* **Action Haptics:** Clicking `[ Approve ]` instantly depresses it, shows a crisp micro-spinner, turns into a solid checkmark before the item closes.
+* `[ Approve & Always Allow ]` option available.
+
+**Run Audit View (`/dashboard/automations/runs/:runId`):**
+
+When a user clicks an Inbox item (or a specific Automation Run), they do NOT instantly teleport to the Studio. They open the **Run Inspector** (full-page view or wide drawer).
+
+* **The Timeline:** Chronological, Raycast-style list of exact actions from `action_invocations` DB:
+  * `[ 08:01 ] ✓ Read file: src/utils.ts`
+  * `[ 08:02 ] ✓ Terminal: npm run test`
+  * `[ 08:03 ] ✋ PENDING: github.create_pull_request (Awaiting Approval)`
+* **Resolution:** User can review JSON parameters and click `[ Approve Once ]`, `[ Deny ]`, or `[ Approve & Always Allow ]`.
+* **The Handoff:** If the user realizes the agent needs course correction, they click `[ Take Over in Studio ]`. This teleports to `/workspace/:id` with persistent banner: "Resumed from Automation."
+
+### `/dashboard/integrations` & `/dashboard/integrations/:id`
+
+**List view:**
+* OAuth connection cards (GitHub, Sentry, Linear, Slack).
+* MCP tool connector grid with quick-setup forms.
+
+**Detail view — Enterprise Governance (`/dashboard/integrations/:id`):**
+
+* **Tab 1: Connection** — API key / OAuth status.
+* **Tab 2: Security Policies (Action Modes)** — High-density data table.
+  * Columns: `Action`, `Description`, `Access Policy`.
+  * Access Policy column: segmented control `[ Allow | Require Approval | Deny ]`.
+  * **Drift Detection:** If MCP tool hash changes, row gets subtle yellow background + `Review Required` warning icon. Admin MUST re-verify.
+
+### `/dashboard/automations`
+
+**Empty state:**
+* Grid of highly legible **Recipe Cards** with crisp typography.
+* CTAs: `[ Sentry Bug Fixer ]`, `[ Stale PR Reviewer ]` — clicking pre-fills the builder.
+
+**The Builder (`/dashboard/automations/new`):**
+
+Rebuilt as a clean, vertical 4-step wizard (no "Triggers" noun):
+
+1. **WHEN:** Select Capability → Select Event → Set Filters.
+2. **WHERE:** Select codebase.
+3. **WHAT:** Agent instructions (Prompt).
+4. **HOW:** Permission Overrides (inherits from workspace, allows specific lockdown for this automation).
+
+**With automations:**
+* Linear-style list view of automation cards with status, trigger count, last run.
+
+### `/dashboard/repositories` & `/dashboard/repositories/:id`
+
+**Empty state:**
+* Copy: "Give your agents a home. Connect your codebase to generate lightning-fast memory snapshots."
+* CTA: `[ Connect GitHub ]`.
+
+**Detail view:**
+* **Configuration:** Service commands, snapshot status.
+* **Secret Files (Admin Only):** Vercel-style file editor writing to `secret_files`. Existing secrets are **Write-Only** — textarea placeholder: *"Value hidden for security. Paste new content to overwrite."* Members cannot see this tab.
+
+**With repos:**
+* Repo list with expandable rows showing configurations, service commands, snapshot status.
+
+---
+
+## 8. Command Palette (Cmd+K)
+
+First-class citizen. `Cmd+K` is available globally.
+
+* Type `New` → `Start new Chat (Interactive)`, `Create Automation (Background)`, `New Environment Configuration`.
+* Places nouns directly next to each other to teach the user the platform's vocabulary.
+* Standard search across sessions, automations, repos, settings.
+
+---
+
+## 9. Sidebar Structures
+
+### Studio Left Sidebar (`/workspace`)
+
+```
+[Logo]
+[+ New session]
+[Search / Cmd+K]
+-----------------
+Threads
+  [Organize] [Add Snapshot]
+  (Session list — grouped by project or chronological)
+  (Sort: updated / created)
+  (Filter: all / running / paused)
+-----------------
+[Support]
+[User card -> Settings, Theme, Sign out]
+```
+
+### Command Center Sidebar (`/dashboard`)
+
+```
+[Logo]
+[+ New Session]              <-- Primary, high-contrast. Navigates to /workspace.
+[Search / Cmd+K]
+-- Workspace --
+  Inbox (badge count)
+  Repositories
+-- Agents --
+  Automations
+  Integrations
+-----------------
+[Support]
+[User card -> Settings, Theme, Sign out]
+```
+
+No session list. No "Threads" section. Sessions live in the Studio only.
+
+### Settings Sidebar (`/settings`)
+
+```
+[<- Back to Dashboard]
+-- Account --
+  Profile
+-- Workspace --
+  General
+  Billing (admin only)
+  Members
+-----------------
+[Org switcher]
+```
+
+---
+
+## 10. UX Polish & Interaction Requirements
+
+* **Action Haptics:** "Human Approval" is the core mechanic. Clicking `[ Approve ]` instantly depresses, shows crisp micro-spinner, turns into solid checkmark before the card closes.
+* **Empty State Media:** No videos or pulsing 3D assets. Use high-quality, monochromatic SVG wireframes or typography-driven empty states that look like developer tools.
+* **Layout Transitions:** Use Framer Motion `layoutId` to animate elements moving between states (e.g., centered Workspace prompt → bottom chat input). Keep durations < 200ms.
+* **Data Rendering:** All IDs, paths, API JSON payloads, and Git SHAs must use a monospace font.
+* **Agent Status:** Do NOT use typing dots. Use monospace lifecycle status: `>_ Analyzing codebase...` → `>_ Running git grep...` → `[!] Waiting for approval`.
+* **Notification Indicator:** The `[ Inbox ]` badge in Studio's top bar. Default: subtle. On arrival: crisp slide-in with count. Only bridge pulling users from Studio → Command Center.
+
+---
+
+## 11. Billing
+
+* Provider: Autumn.
+* 1 credit = 1 cent.
+* All plans pay for credits based on monetary value.
+* Top-ups cost 20% extra (incentive to pick a plan).
+* All plans have free trial (default top-up amount).
+* Compute cost to user: 1 cent per minute.
+* Model cost to user: our cost * 3.
+* Persistent billing display somewhere visible (banner, sidebar footer, or settings).
diff --git a/packages/queue/src/index.ts b/packages/queue/src/index.ts
index fe573a8..e6050c2 100644
--- a/packages/queue/src/index.ts
+++ b/packages/queue/src/index.ts
@@ -21,7 +21,6 @@ export const QUEUE_NAMES = {
 	BILLING_RECONCILE: "billing-reconcile",
 	BILLING_LLM_SYNC_DISPATCH: "billing-llm-sync-dispatch",
 	BILLING_LLM_SYNC_ORG: "billing-llm-sync-org",
-	BILLING_SNAPSHOT_CLEANUP: "billing-snapshot-cleanup",
 } as const;
 
 // ============================================
@@ -145,9 +144,6 @@ export interface BillingLLMSyncOrgJob {
 	orgId: string;
 }
 
-/** Daily snapshot retention cleanup job — cron at 01:00 UTC, no data needed. */
-export type BillingSnapshotCleanupJob = Record<string, never>;
-
 // ============================================
 // Connection Options
 // ============================================
@@ -758,15 +754,6 @@ export function createBillingLLMSyncOrgQueue(
 	});
 }
 
-export function createBillingSnapshotCleanupQueue(
-	connection?: ConnectionOptions,
-): Queue<BillingSnapshotCleanupJob> {
-	return new Queue<BillingSnapshotCleanupJob>(QUEUE_NAMES.BILLING_SNAPSHOT_CLEANUP, {
-		connection: connection ?? getConnectionOptions(),
-		defaultJobOptions: billingRepeatableJobOptions,
-	});
-}
-
 // ============================================
 // Billing Worker Factories
 // ============================================
@@ -831,16 +818,6 @@ export function createBillingLLMSyncOrgWorker(
 	});
 }
 
-export function createBillingSnapshotCleanupWorker(
-	processor: (job: Job<BillingSnapshotCleanupJob>) => Promise<void>,
-	connection?: ConnectionOptions,
-): Worker<BillingSnapshotCleanupJob> {
-	return new Worker<BillingSnapshotCleanupJob>(QUEUE_NAMES.BILLING_SNAPSHOT_CLEANUP, processor, {
-		connection: connection ?? getConnectionOptions(),
-		concurrency: 1,
-	});
-}
-
 // ============================================
 // Convenience Functions
 // ============================================
diff --git a/packages/services/src/billing/db.ts b/packages/services/src/billing/db.ts
index 2fe763a..4e954d2 100644
--- a/packages/services/src/billing/db.ts
+++ b/packages/services/src/billing/db.ts
@@ -186,32 +186,6 @@ export async function listBillableOrgIds(): Promise<string[]> {
 	return rows.map((r) => r.id);
 }
 
-/**
- * List billable orgs that have an Autumn customer ID.
- * Used by the nightly reconciliation job to sync shadow balances.
- */
-export async function listBillableOrgsWithCustomerId(): Promise<
-	{ id: string; autumnCustomerId: string }[]
-> {
-	const db = getDb();
-	const rows = await db
-		.select({
-			id: organization.id,
-			autumnCustomerId: organization.autumnCustomerId,
-		})
-		.from(organization)
-		.where(
-			and(
-				inArray(organization.billingState, ["active", "trial", "grace"]),
-				sql`${organization.autumnCustomerId} IS NOT NULL`,
-			),
-		);
-	return rows.map((r) => ({
-		id: r.id,
-		autumnCustomerId: r.autumnCustomerId!,
-	}));
-}
-
 // ============================================
 // Per-Org LLM Spend Cursors
 // ============================================
diff --git a/packages/services/src/billing/gate.ts b/packages/services/src/billing/gate.ts
index 9b13c97..306dc4f 100644
--- a/packages/services/src/billing/gate.ts
+++ b/packages/services/src/billing/gate.ts
@@ -152,41 +152,3 @@ export async function assertBillingGateForOrg(
 		);
 	}
 }
-
-/**
- * Get the org's plan limits for concurrent session admission.
- *
- * Returns null when billing is disabled (no limit enforcement needed).
- * Used by session creation flows to pass limits to the atomic admission guard.
- */
-export async function getOrgPlanLimits(
-	orgId: string,
-): Promise<{ maxConcurrentSessions: number } | null> {
-	if (!env.NEXT_PUBLIC_BILLING_ENABLED) {
-		return null;
-	}
-
-	const log = getServicesLogger().child({ module: "billing-gate", orgId });
-
-	let org: NonNullable<Awaited<ReturnType<typeof getBillingInfoV2>>>;
-	try {
-		const result = await getBillingInfoV2(orgId);
-		if (!result) {
-			log.error("FAIL-CLOSED: org not found for plan limits");
-			// Fail-closed: enforce most restrictive default
-			return { maxConcurrentSessions: 1 };
-		}
-		org = result;
-	} catch (err) {
-		log.error({ err }, "FAIL-CLOSED: could not load org for plan limits");
-		return { maxConcurrentSessions: 1 };
-	}
-
-	const planId = resolvePlan(org.billingPlan);
-	if (planId && PLAN_CONFIGS[planId]) {
-		return { maxConcurrentSessions: PLAN_CONFIGS[planId].maxConcurrentSessions };
-	}
-
-	// No plan configured — use conservative default
-	return { maxConcurrentSessions: 1 };
-}
diff --git a/packages/services/src/billing/metering.ts b/packages/services/src/billing/metering.ts
index e6c5d00..872bcf0 100644
--- a/packages/services/src/billing/metering.ts
+++ b/packages/services/src/billing/metering.ts
@@ -13,7 +13,7 @@ import {
 } from "@proliferate/shared/billing";
 import { eq, getDb, sessions } from "../db/client";
 import { getServicesLogger } from "../logger";
-import { enforceCreditsExhausted } from "./org-pause";
+import { handleCreditsExhaustedV2 } from "./org-pause";
 import { deductShadowBalance } from "./shadow-balance";
 import { tryActivatePlanAfterTrial } from "./trial-activation";
 
@@ -81,11 +81,11 @@ export async function runMeteringCycle(providers: Map<string, SandboxProvider>):
 			const isAlive = aliveStatus.get(session.sandboxId ?? "");
 
 			if (!isAlive && session.sandboxId) {
-				// Sandbox confirmed dead - bill final interval and mark paused
-				await billFinalInterval(session, nowMs);
+				// Sandbox confirmed dead - bill final interval and mark stopped
+				await billFinalInterval(session, nowMs, providers);
 			} else {
 				// Sandbox alive - bill regular interval
-				await billRegularInterval(session, nowMs);
+				await billRegularInterval(session, nowMs, providers);
 			}
 		} catch (err) {
 			logger.error({ err, sessionId: session.id }, "Error processing session");
@@ -188,7 +188,11 @@ async function checkSandboxesWithGrace(
 /**
  * Bill a regular interval for an active session.
  */
-async function billRegularInterval(session: SessionForMetering, nowMs: number): Promise<void> {
+async function billRegularInterval(
+	session: SessionForMetering,
+	nowMs: number,
+	providers: Map<string, SandboxProvider>,
+): Promise<void> {
 	const meteredThroughMs = session.meteredThroughAt
 		? session.meteredThroughAt.getTime()
 		: session.startedAt.getTime();
@@ -207,7 +211,7 @@ async function billRegularInterval(session: SessionForMetering, nowMs: number):
 	// Deterministic idempotency key based on interval boundaries
 	const idempotencyKey = `compute:${session.id}:${meteredThroughMs}:${billedThroughMs}`;
 
-	await billComputeInterval(session, billableSeconds, billedThroughMs, idempotencyKey);
+	await billComputeInterval(session, billableSeconds, billedThroughMs, idempotencyKey, providers);
 }
 
 /**
@@ -216,7 +220,11 @@ async function billRegularInterval(session: SessionForMetering, nowMs: number):
  * IMPORTANT: Bills through last_seen_alive_at, NOT now.
  * This prevents overbilling for time when sandbox was already dead.
  */
-async function billFinalInterval(session: SessionForMetering, _nowMs: number): Promise<void> {
+async function billFinalInterval(
+	session: SessionForMetering,
+	_nowMs: number,
+	providers: Map<string, SandboxProvider>,
+): Promise<void> {
 	const meteredThroughMs = session.meteredThroughAt
 		? session.meteredThroughAt.getTime()
 		: session.startedAt.getTime();
@@ -234,7 +242,7 @@ async function billFinalInterval(session: SessionForMetering, _nowMs: number): P
 
 	if (remainingSeconds > 0) {
 		const idempotencyKey = `compute:${session.id}:${meteredThroughMs}:final`;
-		await billComputeInterval(session, remainingSeconds, billThroughMs, idempotencyKey);
+		await billComputeInterval(session, remainingSeconds, billThroughMs, idempotencyKey, providers);
 	}
 
 	// Mark session as paused (not stopped) — preserves resumability.
@@ -265,6 +273,7 @@ async function billComputeInterval(
 	billableSeconds: number,
 	billedThroughMs: number,
 	idempotencyKey: string,
+	providers: Map<string, SandboxProvider>,
 ): Promise<void> {
 	const db = getDb();
 	const credits = calculateComputeCredits(billableSeconds);
@@ -324,9 +333,9 @@ async function billComputeInterval(
 		}
 		log.info(
 			{ enforcementReason: result.enforcementReason },
-			"Balance exhausted — pausing sessions",
+			"Balance exhausted - terminating sessions",
 		);
-		await enforceCreditsExhausted(session.organizationId);
+		await handleCreditsExhaustedV2(session.organizationId, providers);
 	} else if (result.shouldBlockNewSessions) {
 		log.info({ enforcementReason: result.enforcementReason }, "Entering grace period");
 		// Grace period started - new sessions will be blocked but existing ones continue
diff --git a/packages/services/src/billing/org-pause.ts b/packages/services/src/billing/org-pause.ts
index 0b9a423..f3393aa 100644
--- a/packages/services/src/billing/org-pause.ts
+++ b/packages/services/src/billing/org-pause.ts
@@ -141,11 +141,11 @@ export async function canOrgStartSession(
 }
 
 // ============================================
-// Enforcement (Lock-Safe Pause/Snapshot)
+// V2 Enforcement (Lock-Safe Pause/Snapshot)
 // ============================================
 
 /**
- * Enforce credits-exhausted state for an organization.
+ * Handle credits exhausted for an organization (V2).
  *
  * Uses lock-safe snapshot/pause transitions instead of hard termination.
  * Each session is individually locked, snapshot'd, and CAS-updated to
@@ -153,9 +153,10 @@ export async function canOrgStartSession(
  *
  * Sessions remain resumable when credits are replenished.
  */
-export async function enforceCreditsExhausted(
+export async function handleCreditsExhaustedV2(
 	orgId: string,
-): Promise<{ paused: number; failed: number }> {
+	_providers?: Map<string, unknown>,
+): Promise<{ terminated: number; failed: number }> {
 	const db = getDb();
 
 	// Get all running sessions
@@ -171,10 +172,10 @@ export async function enforceCreditsExhausted(
 	const logger = getServicesLogger().child({ module: "org-pause", orgId });
 
 	if (!sessionRows.length) {
-		return { paused: 0, failed: 0 };
+		return { terminated: 0, failed: 0 };
 	}
 
-	let paused = 0;
+	let terminated = 0;
 	let failed = 0;
 
 	for (const session of sessionRows) {
@@ -185,7 +186,7 @@ export async function enforceCreditsExhausted(
 				session.sandboxProvider,
 				"credit_limit",
 			);
-			paused++;
+			terminated++;
 		} catch (err) {
 			logger.error({ err, sessionId: session.id }, "Failed to pause session for enforcement");
 			failed++;
@@ -195,14 +196,10 @@ export async function enforceCreditsExhausted(
 	if (failed > 0) {
 		logger.warn({ failed }, "Sessions left running due to pause failures");
 	}
-	logger.info({ paused, failed, reason: "credits_exhausted" }, "Enforcement complete");
-	return { paused, failed };
+	logger.info({ terminated, failed, reason: "credits_exhausted" }, "Enforcement complete");
+	return { terminated, failed };
 }
 
-// ============================================
-// Lock-Safe Pause with Snapshot
-// ============================================
-
 /**
  * Terminate all sessions for an org.
  * Used when billing state transitions to exhausted or suspended.
diff --git a/packages/services/src/billing/outbox.ts b/packages/services/src/billing/outbox.ts
index 27ebe8e..59da03a 100644
--- a/packages/services/src/billing/outbox.ts
+++ b/packages/services/src/billing/outbox.ts
@@ -5,6 +5,7 @@
  * This worker picks up events that failed to post to Autumn and retries them.
  */
 
+import type { SandboxProvider } from "@proliferate/shared";
 import {
 	AUTUMN_FEATURES,
 	type BillingEventType,
@@ -13,7 +14,7 @@ import {
 } from "@proliferate/shared/billing";
 import { and, asc, billingEvents, eq, getDb, inArray, lt, organization } from "../db/client";
 import { getServicesLogger } from "../logger";
-import { enforceCreditsExhausted } from "./org-pause";
+import { handleCreditsExhaustedV2 } from "./org-pause";
 
 // ============================================
 // Types
@@ -37,9 +38,13 @@ interface PendingBillingEvent {
  * Process pending billing events that failed to post to Autumn.
  * Should be called every 60 seconds by a worker.
  *
+ * @param providers - Map of provider type to provider instance
  * @param batchSize - Max events to process per cycle (default: 100)
  */
-export async function processOutbox(batchSize = 100): Promise<void> {
+export async function processOutbox(
+	providers?: Map<string, SandboxProvider>,
+	batchSize = 100,
+): Promise<void> {
 	const logger = getServicesLogger().child({ module: "outbox" });
 	const db = getDb();
 
@@ -70,14 +75,17 @@ export async function processOutbox(batchSize = 100): Promise<void> {
 	logger.info({ eventCount: events.length }, "Processing pending events");
 
 	for (const event of events) {
-		await processEvent(event);
+		await processEvent(event, providers);
 	}
 }
 
 /**
  * Process a single pending event.
  */
-async function processEvent(event: PendingBillingEvent): Promise<void> {
+async function processEvent(
+	event: PendingBillingEvent,
+	providers?: Map<string, SandboxProvider>,
+): Promise<void> {
 	const logger = getServicesLogger().child({
 		module: "outbox",
 		eventId: event.id,
@@ -116,7 +124,7 @@ async function processEvent(event: PendingBillingEvent): Promise<void> {
 					graceExpiresAt: null,
 				})
 				.where(eq(organization.id, event.organizationId));
-			await enforceCreditsExhausted(event.organizationId);
+			await handleCreditsExhaustedV2(event.organizationId, providers);
 		}
 	} catch (err) {
 		// Calculate exponential backoff
@@ -139,10 +147,7 @@ async function processEvent(event: PendingBillingEvent): Promise<void> {
 			.where(eq(billingEvents.id, event.id));
 
 		if (status === "failed") {
-			logger.error(
-				{ err, retryCount, credits: Number(event.credits), alert: true },
-				"Event permanently failed",
-			);
+			logger.error({ err, retryCount }, "Event permanently failed");
 		} else {
 			logger.warn({ err, retryCount }, "Event failed, will retry");
 		}
diff --git a/packages/services/src/billing/snapshot-limits.ts b/packages/services/src/billing/snapshot-limits.ts
index 17f54b7..ce48c4f 100644
--- a/packages/services/src/billing/snapshot-limits.ts
+++ b/packages/services/src/billing/snapshot-limits.ts
@@ -211,76 +211,6 @@ export async function cleanupExpiredSnapshots(
 	return { deletedCount };
 }
 
-/**
- * Clean up ALL expired snapshots across all orgs.
- *
- * Uses the global SNAPSHOT_RETENTION_DAYS cap (the binding constraint in practice,
- * since getRetentionDays returns min(planRetention, globalCap)).
- *
- * Designed for background worker use — bounded, idempotent, safe to run daily.
- */
-export async function cleanupAllExpiredSnapshots(): Promise<{ deletedCount: number }> {
-	const globalCap = env.SNAPSHOT_RETENTION_DAYS;
-	const cutoffDate = new Date();
-	cutoffDate.setDate(cutoffDate.getDate() - globalCap);
-
-	const db = getDb();
-	const expired = (await db.query.sessions.findMany({
-		where: and(isNotNull(sessions.snapshotId), lt(sessions.pausedAt, cutoffDate)),
-		columns: {
-			id: true,
-			snapshotId: true,
-			sandboxProvider: true,
-			pausedAt: true,
-		},
-		orderBy: [asc(sessions.pausedAt)],
-		limit: 500, // Bound work per cycle
-	})) as SessionWithSnapshot[];
-
-	if (!expired.length) {
-		return { deletedCount: 0 };
-	}
-
-	const logger = getServicesLogger().child({ module: "snapshot-cleanup" });
-	let deletedCount = 0;
-
-	for (const session of expired) {
-		if (!session.snapshotId) continue;
-		const result = await evictSnapshot(session, deleteSnapshotFromProvider, logger);
-		if (result) deletedCount++;
-	}
-
-	if (deletedCount > 0) {
-		logger.info({ deletedCount, retentionDays: globalCap }, "Global snapshot cleanup complete");
-	}
-
-	return { deletedCount };
-}
-
-// ============================================
-// Provider-Side Cleanup
-// ============================================
-
-/**
- * Best-effort provider-side snapshot deletion.
- *
- * Currently a no-op: sandbox providers (Modal, E2B) do not expose snapshot
- * delete APIs. Provider-side resources auto-expire:
- * - Modal memory snapshots: 7-day TTL
- * - Modal filesystem snapshots: managed by Modal platform
- * - E2B: managed by E2B platform
- *
- * Resolving successfully allows eviction to proceed and clear the DB ref.
- * When providers add delete APIs, wire them here.
- */
-export async function deleteSnapshotFromProvider(
-	_provider: string,
-	_snapshotId: string,
-): Promise<void> {
-	// No-op — provider-side resources auto-expire.
-	// DB ref will be cleared by the caller (evictSnapshot).
-}
-
 // ============================================
 // Internal Helpers
 // ============================================
diff --git a/packages/services/src/lib/lock.ts b/packages/services/src/lib/lock.ts
index e6086f2..a064500 100644
--- a/packages/services/src/lib/lock.ts
+++ b/packages/services/src/lib/lock.ts
@@ -36,9 +36,6 @@ function getRedlock(): Redlock {
 			driftFactor: 0.01,
 		});
 		redlockInstance.on("error", (err: unknown) => {
-			// Suppress expected contention errors (retryCount: 0 means every contention emits here)
-			const msg = err instanceof Error ? err.message : "";
-			if (msg.includes("quorum") || msg.includes("attempts")) return;
 			getServicesLogger().child({ module: "lock" }).error({ err }, "Redlock error");
 		});
 	}
@@ -85,15 +82,10 @@ export async function runWithMigrationLock<T>(
 	const redlock = getRedlock();
 	const lockKey = getMigrationLockKey(sessionId);
 	try {
-		return await redlock.using([lockKey], ttlMs, { retryCount: 0 }, async () => fn());
-	} catch (err) {
-		const isLockContention =
-			err instanceof Error && (err.message.includes("quorum") || err.message.includes("attempts"));
-		if (!isLockContention) {
-			getServicesLogger()
-				.child({ module: "lock" })
-				.warn({ err, lockKey }, "Lock acquire failed (not contention)");
-		}
+		return await redlock.using([lockKey], ttlMs, async () => fn(), {
+			retryCount: 0,
+		});
+	} catch {
 		return null;
 	}
 }
diff --git a/packages/services/src/managed-prebuild.ts b/packages/services/src/managed-prebuild.ts
index 95d7d1d..422a9c4 100644
--- a/packages/services/src/managed-prebuild.ts
+++ b/packages/services/src/managed-prebuild.ts
@@ -10,8 +10,6 @@
  */
 
 import type { SyncClient } from "@proliferate/gateway-clients";
-import { BillingGateError } from "@proliferate/shared/billing";
-import { assertBillingGateForOrg, getOrgPlanLimits } from "./billing/gate";
 import { getServicesLogger } from "./logger";
 import * as prebuildsDb from "./prebuilds/db";
 import * as sessionsDb from "./sessions/db";
@@ -150,46 +148,16 @@ async function createAndStartSetupSession(
 	repoNames: string[],
 	gateway: SyncClient,
 ): Promise<string> {
-	// Billing gate — setup sessions are billable; on denial, skip setup silently
-	// (the caller's main session was already created)
-	try {
-		await assertBillingGateForOrg(organizationId, "session_start");
-	} catch (err) {
-		if (err instanceof BillingGateError) {
-			getServicesLogger()
-				.child({ module: "managed-prebuild", prebuildId, organizationId })
-				.info({ code: err.code }, "Setup session skipped: billing gate denied");
-			return "";
-		}
-		throw err;
-	}
-
 	const sessionId = crypto.randomUUID();
 	const repoNamesStr = repoNames.join(", ") || "workspace";
 	const prompt = `Set up ${repoNamesStr} for development. Get everything running and working.`;
-	const setupInput = {
+
+	await sessionsDb.createSetupSession({
 		id: sessionId,
 		prebuildId,
 		organizationId,
 		initialPrompt: prompt,
-	};
-
-	// Atomic concurrent admission guard
-	const planLimits = await getOrgPlanLimits(organizationId);
-	if (planLimits) {
-		const { created } = await sessionsDb.createSetupSessionWithAdmissionGuard(
-			setupInput,
-			planLimits.maxConcurrentSessions,
-		);
-		if (!created) {
-			getServicesLogger()
-				.child({ module: "managed-prebuild", prebuildId, organizationId })
-				.info("Setup session skipped: concurrent limit reached");
-			return "";
-		}
-	} else {
-		await sessionsDb.createSetupSession(setupInput);
-	}
+	});
 
 	// Post initial prompt to gateway to kick off setup (fire-and-forget)
 	gateway
diff --git a/packages/services/src/sessions/db.ts b/packages/services/src/sessions/db.ts
index ade3636..ba9c0d5 100644
--- a/packages/services/src/sessions/db.ts
+++ b/packages/services/src/sessions/db.ts
@@ -136,67 +136,6 @@ export async function create(input: CreateSessionInput): Promise<SessionRow> {
 	return result;
 }
 
-/**
- * Atomic concurrent admission guard for session creation.
- *
- * Uses pg_advisory_xact_lock to serialize admission per org so that
- * parallel creates cannot exceed the concurrent session limit (TOCTOU-safe).
- *
- * Lock scope: transaction-scoped advisory lock keyed on org ID.
- * Released automatically when the transaction commits or rolls back.
- */
-export async function createWithAdmissionGuard(
-	input: CreateSessionInput,
-	maxConcurrent: number,
-): Promise<{ created: boolean }> {
-	const db = getDb();
-	return await db.transaction(async (tx) => {
-		// Serialize concurrent admission per org
-		await tx.execute(
-			sql`SELECT pg_advisory_xact_lock(hashtext(${input.organizationId} || ':session_admit'))`,
-		);
-
-		// Count active sessions under the lock
-		const [result] = await tx
-			.select({ count: sql<number>`count(*)` })
-			.from(sessions)
-			.where(
-				and(
-					eq(sessions.organizationId, input.organizationId),
-					sql`${sessions.status} IN ('starting', 'pending', 'running')`,
-				),
-			);
-
-		if (Number(result?.count ?? 0) >= maxConcurrent) {
-			return { created: false };
-		}
-
-		// Insert session within the same transaction
-		await tx.insert(sessions).values({
-			id: input.id,
-			prebuildId: input.prebuildId,
-			organizationId: input.organizationId,
-			sessionType: input.sessionType,
-			status: input.status,
-			sandboxProvider: input.sandboxProvider,
-			createdBy: input.createdBy ?? null,
-			snapshotId: input.snapshotId ?? null,
-			initialPrompt: input.initialPrompt,
-			title: input.title,
-			clientType: input.clientType,
-			clientMetadata: input.clientMetadata,
-			agentConfig: input.agentConfig,
-			localPathHash: input.localPathHash,
-			origin: input.origin,
-			automationId: input.automationId ?? null,
-			triggerId: input.triggerId ?? null,
-			triggerEventId: input.triggerEventId ?? null,
-		});
-
-		return { created: true };
-	});
-}
-
 /**
  * Update a session.
  */
@@ -351,48 +290,6 @@ export async function createSetupSession(input: CreateSetupSessionInput): Promis
 	});
 }
 
-/**
- * Atomic concurrent admission guard for setup session creation.
- * Same advisory lock pattern as createWithAdmissionGuard.
- */
-export async function createSetupSessionWithAdmissionGuard(
-	input: CreateSetupSessionInput,
-	maxConcurrent: number,
-): Promise<{ created: boolean }> {
-	const db = getDb();
-	return await db.transaction(async (tx) => {
-		await tx.execute(
-			sql`SELECT pg_advisory_xact_lock(hashtext(${input.organizationId} || ':session_admit'))`,
-		);
-
-		const [result] = await tx
-			.select({ count: sql<number>`count(*)` })
-			.from(sessions)
-			.where(
-				and(
-					eq(sessions.organizationId, input.organizationId),
-					sql`${sessions.status} IN ('starting', 'pending', 'running')`,
-				),
-			);
-
-		if (Number(result?.count ?? 0) >= maxConcurrent) {
-			return { created: false };
-		}
-
-		await tx.insert(sessions).values({
-			id: input.id,
-			prebuildId: input.prebuildId,
-			organizationId: input.organizationId,
-			sessionType: "setup",
-			status: "starting",
-			initialPrompt: input.initialPrompt,
-			source: "managed-prebuild",
-		});
-
-		return { created: true };
-	});
-}
-
 // ============================================
 // Async Client Queries (Slack, etc.)
 // ============================================
diff --git a/packages/services/src/sessions/index.ts b/packages/services/src/sessions/index.ts
index e15cb38..93e0a61 100644
--- a/packages/services/src/sessions/index.ts
+++ b/packages/services/src/sessions/index.ts
@@ -41,8 +41,6 @@ export {
 	deleteById,
 	findByIdInternal,
 	createSetupSession,
-	createSetupSessionWithAdmissionGuard,
-	createWithAdmissionGuard,
 	updateWhereSandboxIdMatches,
 	listRunningSessionIds,
 } from "./db";
diff --git a/packages/shared/src/billing/gating.ts b/packages/shared/src/billing/gating.ts
index d782c6a..3ba4cdb 100644
--- a/packages/shared/src/billing/gating.ts
+++ b/packages/shared/src/billing/gating.ts
@@ -150,12 +150,7 @@ export function checkBillingGate(
 	}
 
 	// Step 3: Check shadow balance for active/trial states
-	// Resume/connect operations skip the credit minimum — the session already exists,
-	// so we only need state-level checks (Steps 1-2) to block truly denied orgs.
-	if (
-		(operation === "session_start" || operation === "automation_trigger") &&
-		(billingState === "active" || billingState === "trial")
-	) {
+	if (billingState === "active" || billingState === "trial") {
 		if (shadowBalance < minCreditsRequired) {
 			return {
 				allowed: false,
diff --git a/packages/shared/src/billing/types.ts b/packages/shared/src/billing/types.ts
index 6699a73..9e9eca5 100644
--- a/packages/shared/src/billing/types.ts
+++ b/packages/shared/src/billing/types.ts
@@ -378,9 +378,6 @@ export const METERING_CONFIG = {
 
 	/** LLM sync lookback window (ms) */
 	llmSyncLookbackMs: 5 * 60 * 1000,
-
-	/** Absolute drift threshold (credits) that triggers an alert during reconciliation */
-	reconcileDriftAlertThreshold: 500,
 } as const;
 
 // ============================================
diff --git a/packages/shared/src/providers/modal-libmodal.ts b/packages/shared/src/providers/modal-libmodal.ts
index 214475c..eecafed 100644
--- a/packages/shared/src/providers/modal-libmodal.ts
+++ b/packages/shared/src/providers/modal-libmodal.ts
@@ -155,28 +155,7 @@ export class ModalLibmodalProvider implements SandboxProvider {
 		const tokenSecret = normalizeModalEnvValue(env.MODAL_TOKEN_SECRET);
 		const endpoint = normalizeModalEnvValue(env.MODAL_ENDPOINT_URL);
 
-		this.client = new ModalClient({
-			tokenId,
-			tokenSecret,
-			endpoint,
-			// The Modal JS SDK doesn't expose `enableSnapshot` in SandboxCreateParams,
-			// but the protobuf field exists. This middleware intercepts SandboxCreate
-			// requests and moves `enable_snapshot` from experimentalOptions to the
-			// dedicated `enableSnapshot` proto field that enables memory snapshots.
-			grpcMiddleware: [
-				// eslint-disable-next-line @typescript-eslint/no-explicit-any
-				async function* enableSnapshotMiddleware(call: any, options: any) {
-					if (
-						!call.requestStream &&
-						call.request?.definition?.experimentalOptions?.enable_snapshot
-					) {
-						call.request.definition.enableSnapshot = true;
-						delete call.request.definition.experimentalOptions.enable_snapshot;
-					}
-					return yield* call.next(call.request, options);
-				},
-			],
-		});
+		this.client = new ModalClient({ tokenId, tokenSecret, endpoint });
 	}
 
 	private async ensureModalAuth(operation: SandboxOperation): Promise<void> {
@@ -1557,24 +1536,13 @@ export class ModalLibmodalProvider implements SandboxProvider {
 			});
 
 			const waitStartMs = Date.now();
-			const waitResponse = await this.client.cpClient.sandboxSnapshotWait({
-				snapshotId,
-				timeout: 120,
-			});
+			await this.client.cpClient.sandboxSnapshotWait({ snapshotId, timeout: 120 });
 			logLatency("provider.memory_snapshot.wait_complete", {
 				provider: this.type,
 				sessionId,
 				durationMs: Date.now() - waitStartMs,
 			});
 
-			// GenericResult_GenericStatus: SUCCESS=1, FAILURE=2, TERMINATED=3
-			const result = waitResponse.result;
-			if (result && result.status !== 1) {
-				throw new Error(
-					`Memory snapshot failed (status=${result.status}): ${result.exception || "unknown"}`,
-				);
-			}
-
 			const memSnapshotId = `mem:${snapshotId}`;
 			providerLogger.info(
 				{ snapshotId: memSnapshotId, durationMs: Date.now() - startMs },
