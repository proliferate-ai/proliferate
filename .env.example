# =============================================================================
# Proliferate Environment Variables
# =============================================================================
# Quick start:
#   ./scripts/setup-env.sh          # Creates .env with auto-generated secrets
#   ./scripts/setup-env.sh --force  # Overwrites existing .env
#
# Or manually:
#   cp .env.example .env            # Then fill in secrets below

# -----------------------------------------------------------------------------
# Deployment Profile
# -----------------------------------------------------------------------------
# self_host | cloud
DEPLOYMENT_PROFILE=self_host

# -----------------------------------------------------------------------------
# Core Secrets (auto-generated by setup-env.sh)
# -----------------------------------------------------------------------------
# For local dev (pnpm dev). Docker Compose overrides this inside containers.
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres
BETTER_AUTH_SECRET=               # Auto-generated by setup-env.sh, or set any random string
SERVICE_TO_SERVICE_AUTH_TOKEN=     # Auto-generated by setup-env.sh, or set any random string
GATEWAY_JWT_SECRET=               # Auto-generated by setup-env.sh, or set any random string
USER_SECRETS_ENCRYPTION_KEY=      # Auto-generated by setup-env.sh (64 hex chars)

# -----------------------------------------------------------------------------
# Public (client + server)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3000
NEXT_PUBLIC_GATEWAY_URL=ws://localhost:8787
NEXT_PUBLIC_BILLING_ENABLED=false
NEXT_PUBLIC_ENFORCE_EMAIL_VERIFICATION=false
NEXT_PUBLIC_INTEGRATIONS_ENABLED=false
# GitHub App (repo access) is the default. Set true to use Nango OAuth instead.
NEXT_PUBLIC_USE_NANGO_GITHUB=false
# IMPORTANT: Must match your GitHub App's URL slug (the lowercase-hyphenated name).
# If you used the prefilled link in the README, the slug is "proliferate-self-host".
# Find it at: https://github.com/settings/apps → your app → the URL shows /apps/<slug>
NEXT_PUBLIC_GITHUB_APP_SLUG=
NEXT_PUBLIC_NANGO_GITHUB_INTEGRATION_ID=github-app   # Required when integrations enabled
NEXT_PUBLIC_NANGO_LINEAR_INTEGRATION_ID=linear       # Required when integrations enabled
NEXT_PUBLIC_NANGO_SENTRY_INTEGRATION_ID=sentry-oauth # Required when integrations enabled
NEXT_PUBLIC_SENTRY_DSN=
NEXT_PUBLIC_POSTHOG_HOST=
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_INTERCOM_APP_ID=

# -----------------------------------------------------------------------------
# Runtime + Ports
# -----------------------------------------------------------------------------
WEB_PORT=3000
GATEWAY_PORT=8787
WORKER_PORT=8080
API_PORT=4000
NEXT_BUILD_STANDALONE=false
CI=false
WORKSPACE_DIR=/workspace

# -----------------------------------------------------------------------------
# Sandbox + Providers
# -----------------------------------------------------------------------------
DEFAULT_SANDBOX_PROVIDER=modal
SANDBOX_TIMEOUT_SECONDS=3600
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=
E2B_API_KEY=
E2B_DOMAIN=api.e2b.dev
E2B_TEMPLATE=proliferate-base
E2B_TEMPLATE_ALIAS=proliferate-base
MODAL_APP_NAME=proliferate-sandbox
MODAL_APP_SUFFIX=local
# Optional: override the Modal endpoint URL (primarily used by local scripts/tests).
MODAL_ENDPOINT_URL=
MODAL_TOKEN_ID=
MODAL_TOKEN_SECRET=

# -----------------------------------------------------------------------------
# LLM Proxy (optional)
# -----------------------------------------------------------------------------
LLM_PROXY_URL=
LLM_PROXY_ADMIN_URL=
LLM_PROXY_PUBLIC_URL=
LLM_PROXY_MASTER_KEY=
LLM_PROXY_KEY_DURATION=720h
LLM_PROXY_REQUIRED=false

# -----------------------------------------------------------------------------
# Billing (Autumn) - cloud only
# -----------------------------------------------------------------------------
AUTUMN_API_URL=
AUTUMN_API_KEY=
BILLING_JWT_SECRET=

# -----------------------------------------------------------------------------
# GitHub App (required for repo access unless NEXT_PUBLIC_USE_NANGO_GITHUB=true)
# -----------------------------------------------------------------------------
GITHUB_APP_ID=
# Paste the PEM key. "\\n" sequences are supported (converted to real newlines at runtime).
GITHUB_APP_PRIVATE_KEY=
# Used to verify inbound GitHub webhooks (X-Hub-Signature-256).
# If you disable webhooks (common for localhost), any random string works.
# Auto-generated by setup-env.sh.
GITHUB_APP_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# OAuth (optional — only needed if you want Google/GitHub login buttons)
# -----------------------------------------------------------------------------
# These are OAuth Apps for user login, independent from the GitHub App above.
# If not set, only email/password login will be available.
GITHUB_OAUTH_APP_ID=
GITHUB_OAUTH_APP_SECRET=
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Integrations (optional)
# -----------------------------------------------------------------------------
INTERCOM_SECRET_KEY=
# Required when NEXT_PUBLIC_INTEGRATIONS_ENABLED=true
NANGO_SECRET_KEY=

# -----------------------------------------------------------------------------
# Email (optional)
# -----------------------------------------------------------------------------
# Set EMAIL_ENABLED=true if you want email invites/verification
EMAIL_ENABLED=false
RESEND_API_KEY=
EMAIL_FROM=

# -----------------------------------------------------------------------------
# Slack (optional)
# -----------------------------------------------------------------------------
SLACK_CLIENT_ID=
SLACK_CLIENT_SECRET=
SLACK_SIGNING_SECRET=
PROLIFERATE_SLACK_BOT_TOKEN=
PROLIFERATE_SLACK_CONNECT_EMAILS=

# -----------------------------------------------------------------------------
# Storage (S3-compatible, used for verification media)
# -----------------------------------------------------------------------------
# Required in cloud for verification media; optional for self-host.
# Local MinIO (docker compose --profile minio):
S3_BUCKET=proliferate-verification
S3_REGION=us-east-1
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin

# MinIO credentials (optional)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Sentry (optional, build tooling)
# -----------------------------------------------------------------------------
SENTRY_AUTH_TOKEN=
SENTRY_ORG=
SENTRY_PROJECT=

# -----------------------------------------------------------------------------
# Admin + Dev
# -----------------------------------------------------------------------------
SUPER_ADMIN_EMAILS=admin@example.com
DEV_USER_ID=disabled

# -----------------------------------------------------------------------------
# Script helpers (dev only)
# -----------------------------------------------------------------------------
AUTH_TOKEN=
TEST_REPO_ID=
TEST_TOKEN=
