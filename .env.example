# =============================================================================
# Proliferate Environment Variables (Required)
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env

# -----------------------------------------------------------------------------
# Deployment Profile
# -----------------------------------------------------------------------------
# self_host | cloud
DEPLOYMENT_PROFILE=self_host

# -----------------------------------------------------------------------------
# Core
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres
BETTER_AUTH_SECRET=replace-me
SERVICE_TO_SERVICE_AUTH_TOKEN=replace-me
USER_SECRETS_ENCRYPTION_KEY=replace-me

# -----------------------------------------------------------------------------
# Public (client + server)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3000
NEXT_PUBLIC_GATEWAY_URL=http://localhost:8787
NEXT_PUBLIC_BILLING_ENABLED=false
NEXT_PUBLIC_ENFORCE_EMAIL_VERIFICATION=false
NEXT_PUBLIC_INTEGRATIONS_ENABLED=false
# GitHub App (repo access) is the default. Set true to use Nango OAuth instead.
NEXT_PUBLIC_USE_NANGO_GITHUB=false
# Self-hosters must create their own GitHub App and set its slug here.
# GitHub App install URL: https://github.com/apps/<slug>/installations/new
# GitHub App Setup URL (post-install redirect): <YOUR_APP_URL>/api/integrations/github/callback
# GitHub App Webhook URL (optional, requires public URL or tunnel): <YOUR_APP_URL>/api/webhooks/github-app
NEXT_PUBLIC_GITHUB_APP_SLUG=proliferate-local-dev
NEXT_PUBLIC_NANGO_GITHUB_INTEGRATION_ID=github-app   # Required when integrations enabled
NEXT_PUBLIC_NANGO_LINEAR_INTEGRATION_ID=linear       # Required when integrations enabled
NEXT_PUBLIC_NANGO_SENTRY_INTEGRATION_ID=sentry-oauth # Required when integrations enabled
NEXT_PUBLIC_SENTRY_DSN=https://examplePublicKey@o0.ingest.sentry.io/0
NEXT_PUBLIC_POSTHOG_HOST=
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_INTERCOM_APP_ID=

# -----------------------------------------------------------------------------
# Runtime + Ports
# -----------------------------------------------------------------------------
WEB_PORT=3000
GATEWAY_PORT=8787
WORKER_PORT=8080
API_PORT=4000
NEXT_BUILD_STANDALONE=false
CI=false
WORKSPACE_DIR=/workspace

# -----------------------------------------------------------------------------
# Sandbox + Providers
# -----------------------------------------------------------------------------
DEFAULT_SANDBOX_PROVIDER=modal
SANDBOX_TIMEOUT_SECONDS=3600
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-openai-...
E2B_API_KEY=e2b_...
E2B_DOMAIN=api.e2b.dev
E2B_TEMPLATE=proliferate-base
E2B_TEMPLATE_ALIAS=proliferate-base
MODAL_APP_NAME=proliferate-sandbox
MODAL_APP_SUFFIX=local
# Optional: override the Modal endpoint URL (primarily used by local scripts/tests).
MODAL_ENDPOINT_URL=
MODAL_TOKEN_ID=replace-me
MODAL_TOKEN_SECRET=replace-me

# -----------------------------------------------------------------------------
# LLM Proxy
# -----------------------------------------------------------------------------
LLM_PROXY_URL=
LLM_PROXY_ADMIN_URL=
LLM_PROXY_PUBLIC_URL=
LLM_PROXY_MASTER_KEY=
LLM_PROXY_KEY_DURATION=720h
LLM_PROXY_REQUIRED=false

# -----------------------------------------------------------------------------
# Billing (Autumn) - cloud only
# -----------------------------------------------------------------------------
AUTUMN_API_URL=
AUTUMN_API_KEY=
BILLING_JWT_SECRET=

# -----------------------------------------------------------------------------
# OAuth + Integrations
# -----------------------------------------------------------------------------
# GitHub App credentials (required for repo access unless NEXT_PUBLIC_USE_NANGO_GITHUB=true)
GITHUB_APP_ID=replace-me
# Paste the PEM key. "\\n" sequences are supported (converted to real newlines at runtime).
GITHUB_APP_PRIVATE_KEY=replace-me
# Used to verify inbound GitHub webhooks (X-Hub-Signature-256). If you disable webhooks in the GitHub App,
# you can set this to any random string, but it must still be present for strict env validation.
GITHUB_APP_WEBHOOK_SECRET=replace-me
# OAuth apps below are optional (user login), independent from GitHub App repo access.
GITHUB_OAUTH_APP_ID=replace-me
GITHUB_OAUTH_APP_SECRET=replace-me
GOOGLE_CLIENT_ID=replace-me
GOOGLE_CLIENT_SECRET=replace-me
INTERCOM_SECRET_KEY=replace-me
# Required when NEXT_PUBLIC_INTEGRATIONS_ENABLED=true
NANGO_SECRET_KEY=

# -----------------------------------------------------------------------------
# Email
# -----------------------------------------------------------------------------
# Set EMAIL_ENABLED=true if you want email invites/verification
EMAIL_ENABLED=false
RESEND_API_KEY=
EMAIL_FROM=

# -----------------------------------------------------------------------------
# Slack
# -----------------------------------------------------------------------------
SLACK_CLIENT_ID=replace-me
SLACK_CLIENT_SECRET=replace-me
SLACK_SIGNING_SECRET=replace-me
PROLIFERATE_SLACK_BOT_TOKEN=replace-me
PROLIFERATE_SLACK_CONNECT_EMAILS=alerts@proliferate.com

# -----------------------------------------------------------------------------
# Storage (S3-compatible, used for verification media)
# -----------------------------------------------------------------------------
# Required in cloud for verification media; optional for self-host.
# Local MinIO (docker compose --profile minio):
S3_BUCKET=proliferate-verification
S3_REGION=us-east-1
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin

# MinIO credentials (optional)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin


# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Sentry (build tooling)
# -----------------------------------------------------------------------------
SENTRY_AUTH_TOKEN=sntryu_xxx
SENTRY_ORG=replace-me
SENTRY_PROJECT=replace-me

# -----------------------------------------------------------------------------
# Admin + Dev
# -----------------------------------------------------------------------------
SUPER_ADMIN_EMAILS=admin@example.com
DEV_USER_ID=disabled

# -----------------------------------------------------------------------------
# Script helpers
# -----------------------------------------------------------------------------
AUTH_TOKEN=replace-me
TEST_REPO_ID=replace-me
TEST_TOKEN=replace-me
